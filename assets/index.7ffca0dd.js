import{r as b,a as l,j as t,F as W,b as xe,B as we}from"./vendor.2eb4e70c.js";import{c as oe}from"./zustand.d9e8c8dc.js";import{E as Te,H as Re,D as Ee,V as Ae,m as se,n as Ie,p as ke,A as Be,q as ze}from"./@chakra-ui/icons.ea23b253.js";import{V as D,K as Oe,F as E,b as A,I as N,c as ae,R as De,H as R,d as J,u as ce,e as U,f as j,A as je,M as G,g as He,h as q,i as Q,j as le,B as L,T,S as Pe,k as ue,l as de,m as P,n as pe,C as _e,o as I,p as he,q as We,r as fe,s as me,t as X,P as Ne,v as Me,w as Fe,x as Le,y as Ke,z as Ve,D as $e,E as ve,G as Ue,J as Ge,L as qe,N as Qe,O as ge,Q as Je,U as Xe,W as Ye}from"./@chakra-ui/react.0a2a1b54.js";import{Q as Ze,a as et}from"./react-query.27f51779.js";import"./@emotion/react.25f65135.js";import"./@emotion/styled.a9120842.js";import"./framer-motion.105f128b.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const y=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),M={["below 3.5t"]:600,["3.5t-5.5t"]:800},H={["below 3.5t"]:4.9,["3.5t-5.5t"]:12.5},ye=.5,$=(e,n,r)=>e*n+r*2*ye,Y=(e,n)=>e*H[n]+M[n],tt=(e,n,r)=>e.map(i=>i.id===r?{...i,textSummary:n}:i),rt=e=>({driveToPlace:{rate:0,hours:0,setRate:n=>e(r=>({...r,services:r.services.map(i=>i.id==="3"?{...i,price:$(n,r.driveToPlace.hours,r.settings.distanceBeforeRepair)}:i),driveToPlace:{...r.driveToPlace,rate:n}})),setHours:n=>e(r=>({...r,services:r.services.map(i=>i.id==="3"?{...i,price:$(r.driveToPlace.rate,n,r.settings.distanceBeforeRepair)}:i),driveToPlace:{...r.driveToPlace,hours:n}}))}}),nt=e=>({euroCourse:{rate:0,timestamp:0},setEuroCourse:(n,r)=>e(i=>({...i,euroCourse:{rate:n,timestamp:r}}))}),it={TOW_TO_BREAKDOWN:"H",TOW_BACK:"J",DRIVE_TO_CLIENT:"K",RENT_CAR:"L",DOCUMENTATION:"B",BONUS:"N"},ot={DISTANCE_TO_BREAKDOWN:"Q",DISTANCE_TOW_BACK:"W",VEHICLE_MASS:"E"},C={VIEW_SERVICES:"V",RESET:"R",SHOW_DRAWER:"D",FOCUS:ot,REMOVE_SERVICE:it},O={distanceAfterRepair:0,distanceBeforeRepair:0,vehicleWeight:"below 3.5t"},st=e=>({settings:O,setVehicleWeight:n=>e(r=>({...r,settings:{...r.settings,vehicleWeight:n},services:r.services.map(i=>i.id==="1"?{...i,price:Y(r.settings.distanceBeforeRepair,n)}:i)})),setDistanceBeforeRepair:n=>e(r=>({...r,services:r.services.map(i=>i.id==="1"?{...i,price:Y(n,r.settings.vehicleWeight)}:i.id==="3"?{...i,price:$(r.driveToPlace.rate,r.driveToPlace.hours,n)}:i),settings:{...r.settings,distanceBeforeRepair:n}})),setDistanceAfterRepair:n=>e(r=>({...r,services:r.services.map(i=>i.id==="5"?{...i,price:n<50?300:n*1.41*4+60.03*4}:i),settings:{...r.settings,distanceAfterRepair:n}}))}),Z=[{title:"Holowanie z miejsca awarii",id:"1",mixGroup:1,price:M[O.vehicleWeight]+H[O.vehicleWeight]*O.distanceBeforeRepair,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.TOW_TO_BREAKDOWN},{title:"Auto zast\u0119pcze",id:"2",mixGroup:2,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.RENT_CAR},{title:"Dojazd do miejsca awarii",id:"3",mixGroup:1,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.DRIVE_TO_CLIENT},{title:"Bonus za napraw\u0119 na miejscu",id:"4",mixGroup:1,price:100,textSummary:"Bonus za napraw\u0119 na miejscu 100 z\u0142",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.BONUS},{title:"Odwiezienie auta",id:"5",mixGroup:1,price:O.distanceAfterRepair<50?300:O.distanceAfterRepair*1.41*4+60.03*4,textSummary:"",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.TOW_BACK},{title:"Dokumentacja",id:"6",mixGroup:1,price:100,textSummary:"Rycza\u0142t 100 z\u0142 za wykonanie dokumentacji",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.DOCUMENTATION}],at=e=>({services:Z,toggleService:n=>e(r=>({...r,services:r.services.map(i=>i.id===n?{...i,active:!i.active}:i)})),resetServices:()=>e(n=>({...n,services:Z})),setServicePrice:(n,r)=>e(i=>({...i,services:i.services.map(s=>s.id===n?{...s,price:r}:s)})),setServiceTextSummary:(n,r)=>e(i=>({...i,services:tt(i.services,n,r)}))}),d=oe()((...e)=>({...st(...e),...at(...e),...rt(...e),...nt(...e)})),F=e=>n=>{try{const r=e(n);return r instanceof Promise?r:{then(i){return F(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return F(i)(r)}}}},ct=(e,n)=>(r,i,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:h=>h,version:0,merge:(h,x)=>({...x,...h}),...n},a=!1;const c=new Set,p=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...h)},i,s);const m=F(o.serialize),S=()=>{const h=o.partialize({...i()});let x;const v=m({state:h,version:o.version}).then(z=>u.setItem(o.name,z)).catch(z=>{x=z});if(x)throw x;return v},f=s.setState;s.setState=(h,x)=>{f(h,x),S()};const g=e((...h)=>{r(...h),S()},i,s);let w;const _=()=>{var h;if(!u)return;a=!1,c.forEach(v=>v(i()));const x=((h=o.onRehydrateStorage)==null?void 0:h.call(o,i()))||void 0;return F(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var z;return w=o.merge(v,(z=i())!=null?z:g),r(w,!0),S()}).then(()=>{x==null||x(w,void 0),a=!0,p.forEach(v=>v(w))}).catch(v=>{x==null||x(void 0,v)})};return s.persist={setOptions:h=>{o={...o,...h},h.getStorage&&(u=h.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>_(),hasHydrated:()=>a,onHydrate:h=>(c.add(h),()=>{c.delete(h)}),onFinishHydration:h=>(p.add(h),()=>{p.delete(h)})},_(),w||g},lt=ct,K=oe()(lt(e=>({extendedInfo:!0,show:()=>e({extendedInfo:!0}),hide:()=>e({extendedInfo:!1})}))),ut=(e,n)=>{const[r,i]=b.exports.useState(!1),s=b.exports.useCallback(a=>{a.shiftKey&&i(!0),a.key===e&&r&&n()},[r,e]),o=b.exports.useCallback(a=>{a.shiftKey||i(!1)},[r,e]);return b.exports.useEffect(()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",o)}),[s,o]),{modifierPressed:r}},dt="_wrapper_pg9d5_1",pt="_keyWrapper_pg9d5_9",ht="_scaleIn_pg9d5_1",ft="_left_pg9d5_41",mt="_scaleInLeft_pg9d5_1",V={wrapper:dt,keyWrapper:pt,scaleIn:ht,left:ft,scaleInLeft:mt},k=({children:e,keyboardKey:n,condition:r=!0,callback:i,direction:s})=>{const o=()=>{r&&i()},{modifierPressed:a}=ut(n,o);return l(D,{className:V.wrapper,children:[e,r&&a&&t("span",{className:`${V.keyWrapper} ${s==="left"?V.left:""}`,children:t(Oe,{children:n.toString().toUpperCase()})})]})},vt=({inputHelperText:e,inputTitle:n,value:r,onChange:i,focusShortcut:s})=>{const o=b.exports.useRef(null),a=K(c=>c.extendedInfo);return l(E,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[t(A,{children:n}),t(k,{callback:()=>{var c;(c=o.current)==null||c.focus()},keyboardKey:s,children:t(N,{ref:o,type:"number",min:"0",value:r,onChange:i})}),a&&t(ae,{children:e})]})},gt=()=>{const e=d(r=>r.setVehicleWeight);return{vehicleWeightInputHandler:r=>{(r==="3.5t-5.5t"||r==="below 3.5t")&&e(r)}}},yt=()=>{const{vehicleWeightInputHandler:e}=gt(),n=b.exports.useRef(null),r=()=>{var o,a;const s=(o=n.current)==null?void 0:o.querySelectorAll("input");s&&((a=[...s].find(c=>c.checked))==null||a.focus())},i=K(s=>s.extendedInfo);return l(E,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[t(A,{as:"legend",children:"Masa pojazdu"}),t(k,{keyboardKey:C.FOCUS.VEHICLE_MASS,callback:r,children:t(De,{ref:n,onChange:e,defaultValue:"below 3.5t",children:l(R,{spacing:"24px",children:[t(J,{value:"below 3.5t",children:"Poni\u017Cej 3.5t"}),t(J,{value:"3.5t-5.5t",children:"3.5t - 5.5t"})]})})}),i&&t(ae,{children:"Do rozliczania holowania"})]})},St=()=>{const{setDistanceAfterRepair:e,setDistanceBeforeRepair:n,settings:r}=d(o=>o);return{distanceInputHandler:o=>{n(Number(o.target.value))},distanceAfterRepairInputHandler:o=>{e(Number(o.target.value))},distanceBeforeRepair:r.distanceBeforeRepair,distanceAfterRepair:r.distanceAfterRepair}},Ct=()=>{const{distanceAfterRepair:e,distanceAfterRepairInputHandler:n,distanceBeforeRepair:r,distanceInputHandler:i}=St(),{isOpen:s,onOpen:o,onClose:a}=ce(),c=b.exports.useRef(null),[p]=U("(min-width: 800px)"),u=[{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107",value:r,onChange:i,focusShortcut:C.FOCUS.DISTANCE_TO_BREAKDOWN},{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107 odwiezienia",value:e,onChange:n,focusShortcut:C.FOCUS.DISTANCE_TOW_BACK}].map(S=>t(vt,{...S},S.inputTitle)),m=l(W,{children:[u," ",t(yt,{})]});return p?t(R,{h:"100%",rounded:"2xl",p:"4",shadow:"lg",border:"4px",borderColor:"gray.700",align:"baseline",children:m}):l(W,{children:[t(j,{colorScheme:"blue",size:"lg",rounded:"full",onClick:o,"aria-label":"Edytuj us\u0142ugi",icon:t(Te,{fontSize:"3xl",m:"2"})}),t(je,{isOpen:s,leastDestructiveRef:c,onClose:a,children:t(G,{children:l(He,{maxWidth:"95%",alignSelf:"center",children:[t(q,{fontSize:"lg",fontWeight:"bold",children:"Edytuj us\u0142ugi"}),l(Q,{children:[" ",t(D,{gap:8,h:"100%",borderColor:"gray.700",align:"baseline",children:m})]}),t(le,{mt:"8",children:t(L,{ref:c,onClick:a,children:"Zamknij"})})]})})})]})},bt=({drawerOpenHandler:e})=>t(k,{keyboardKey:C.SHOW_DRAWER,callback:e,children:t(T,{hasArrow:!0,label:"Menu z us\u0142ugami",children:t(j,{"aria-label":"Poka\u017C us\u0142ugi",onClick:e,children:t(Re,{})})})}),xt=()=>{const n=d(i=>i.services).filter(i=>i.active),r=n.filter(i=>i.price>0).length>0;return{servicesCount:n.length,hasServices:n.length>0,hasServicesWithValue:r}},wt=({summaryOpenHandler:e})=>{const{resetServices:n}=d(p=>p),{hasServices:r,hasServicesWithValue:i}=xt(),{extendedInfo:s,hide:o,show:a}=K(p=>p),c=p=>{p.target.checked?a():o()};return l(D,{children:[l(R,{children:[t(k,{condition:r,keyboardKey:C.RESET,callback:n,children:t(T,{hasArrow:!0,label:"Resetuj wszystko",children:t(j,{disabled:!r,onClick:n,"aria-label":"Resetuj wszystko",children:t(Ee,{})})})}),t(k,{condition:i,keyboardKey:C.VIEW_SERVICES,callback:e,children:t(T,{hasArrow:!0,label:"Podsumowanie us\u0142ug",children:t(j,{disabled:!i,onClick:e,"aria-label":"Podsumowanie us\u0142ug",children:t(Ae,{})})})})]}),t(T,{hasArrow:!0,label:`Wy\u015Bwietl ${s?"mniej":"wi\u0119cej"} informacji`,placement:"left",children:t(E,{display:"flex",alignItems:"center",children:l(D,{children:[t(A,{htmlFor:"extended-info",mb:"0",children:"Informacje"}),t(Pe,{isChecked:s,onChange:c,id:"extended-info"})]})})})]})},Tt=({activeServiceSummary:e,activeServices:n})=>{const r=n.length,i=r>0,s=y(e),o=K(a=>a.extendedInfo);return t(ue,{h:"100%",rounded:"2xl",p:"4",shadow:"2xl",border:"4px",borderColor:"green.700",children:t(de,{h:"100%",children:l(P,{children:[t(pe,{children:l(R,{children:[i&&t(_e,{size:"30px",bg:"green.700",children:r}),t(I,{children:"Razem"})]})}),t(he,{children:s}),o&&t(We,{children:"Ca\u0142kowita warto\u015B\u0107 us\u0142ug"})]})})})},ee=({drawerOpenHandler:e,summaryOpenHandler:n})=>{const i=d(u=>u.services).filter(u=>u.active),s=i.reduce((u,m)=>u+m.price,0),o=d(u=>u.euroCourse),a=Boolean(o.rate&&o.rate>0),[c]=U("(min-width: 800px)");return l(fe,{padding:c?"0":"8",w:"100%",align:"center",justify:"space-between",gap:"2",children:[t(bt,{drawerOpenHandler:e}),t(Ct,{}),a&&t(ue,{padding:"2",rounded:"2xl",border:"4px",borderColor:"blue.800",h:"100%",children:t(me,{h:"100%",children:l(D,{children:[t(I,{fontWeight:"bold",children:"Kurs EUR:"}),t(I,{children:y(o.rate)})]})})}),t(Tt,{activeServices:i,activeServiceSummary:s}),t(wt,{summaryOpenHandler:n})]})},Rt=({badges:e,hasIncompatibleServices:n})=>{const r=e.map(o=>t(X,{colorScheme:"green",children:o}));return t(D,{flexBasis:"10%",children:n?t(X,{colorScheme:"purple",variant:"outline",children:"Niekompatybilna"}):r})},Et="_button_1wpqb_1",te={button:Et},At=({children:e,text:n,onCopy:r})=>l(Ne,{children:[t(Me,{children:t("button",{className:te.button,children:t(T,{hasArrow:!0,label:"Poka\u017C ca\u0142o\u015B\u0107",children:e})})}),l(Fe,{shadow:"2xl",children:[t(Le,{}),t(Ke,{}),t(Ve,{children:"Informacje o us\u0142udze"}),t($e,{children:t(T,{hasArrow:!0,label:"Skopiuj tekst",children:t("button",{className:te.button,onClick:r,children:n.split("|").map(i=>t("p",{children:i}))})})})]})]}),Se=({children:e,hasCopied:n})=>t(T,{closeOnClick:!1,bg:n?"green.500":"gray.500",hasArrow:!0,label:n?"Skopiowano":"Skopiuj",children:e}),It=({hasCopied:e,onCopy:n})=>t(Se,{hasCopied:e,children:t(j,{onClick:n,"aria-label":"Skopiuj do schowka",children:e?t(se,{}):t(Ie,{})})}),kt={justifyContent:"space-between",flex:"0 0 350px",bg:"chakra-body-bg",rounded:"md",shadow:"md",p:"2"},Bt={fontSize:"xs",fontFamily:"mono",maxH:"4em",overflow:"auto"},zt={fontStyle:"italic"},Ot={border:"2px",borderColor:"red.700"},Dt=e=>{const n={\u0105:"a",\u0107:"c",\u0119:"e",\u0142:"l",\u0144:"n",\u00F3:"o",\u015B:"s",\u017A:"z",\u017C:"z"};return e.toLowerCase().replace(/[ąćęłńóśźż]/g,r=>n[r]).toUpperCase()},jt=(e="",n)=>{const r=Dt(e).split("|").map(p=>p.trim()).join(`
`).trim(),{onCopy:i,hasCopied:s}=ve(r);return{onCopy:()=>{i(),navigator.clipboard.writeText(r)},hasCopied:s,errorStyle:n?Ot:{},textStyle:n?zt:{}}},Ht=({textToCopy:e,hasError:n})=>{const{errorStyle:r,hasCopied:i,textStyle:s,onCopy:o}=jt(e,n);return e?l(R,{...kt,...r,children:[t(At,{onCopy:o,text:e,children:t(I,{...s,...Bt,children:e.split("|").map(a=>t("p",{children:a}))})}),t(It,{hasCopied:i,onCopy:o})]}):null},Pt=({onDelete:e})=>t(T,{hasArrow:!0,label:"Usu\u0144 us\u0142ug\u0119",children:t(j,{onClick:e,"aria-label":"Usu\u0144 us\u0142ug\u0119",children:t(ke,{})})}),_t=({price:e})=>{const n=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),{onCopy:r,hasCopied:i}=ve(e.toFixed(2));return t(de,{display:"flex",justifyContent:"center",w:"fit-content",flex:"0 0 120px",children:t(Se,{hasCopied:i,children:l("button",{onClick:()=>{r(),navigator.clipboard.writeText(e.toString())},children:[t(pe,{children:"Op\u0142ata"}),t(he,{whiteSpace:"nowrap",children:i?t(se,{}):n})]})})})},Wt=({children:e,shortcutKey:n,serviceDeleteHandler:r})=>n?t(k,{direction:"left",callback:r,keyboardKey:n,children:e}):t(W,{children:e}),Nt=e=>{if(!e)return{hasErrors:!1};const i=d(s=>s.services).filter(s=>s.active).filter(s=>e.includes(s.id));return{hasErrors:i.length>0,conflictingServices:i}},Mt=(e,n)=>{const r=d(m=>m.services.find(S=>S.id===e)),i=r==null?void 0:r.active,s=d(m=>m.toggleService),o=()=>{s(e)},{hasErrors:a,conflictingServices:c}=Nt(n),p=a?"red.900":"transparent",u=`Ta us\u0142uga nie mo\u017Ce by\u0107 \u0142\u0105czona z: ${c==null?void 0:c.map(m=>m.title).join(", ")}`;return{conflictingServices:c,hasErrors:a,bgColor:p,isActive:i,deleteServiceButtonHandler:o,conflictingServicesText:u,shortcutKey:r==null?void 0:r.deleteServiceShortcut}},Ft={gap:"4",borderBottom:"2px",borderColor:"gray.600",p:"2",px:"4",align:"center",justify:"space-between",w:"100%"},B=({service:e,textToCopy:n,children:r,serviceId:i,hasError:s,cantBeMixedWith:o})=>{const{title:a,price:c,badges:p}=e,{bgColor:u,conflictingServicesText:m,deleteServiceButtonHandler:S,hasErrors:f,isActive:g,shortcutKey:w}=Mt(i,o);return g?l(fe,{...Ft,bg:u,children:[t(I,{fontWeight:"bold",flex:"1 0 100px",children:a}),r,t(Rt,{hasIncompatibleServices:f,badges:p}),t(Ht,{hasError:s||f,textToCopy:f?m:n}),t(_t,{price:c}),t(Wt,{shortcutKey:w,serviceDeleteHandler:S,children:t(Pt,{onDelete:S})})]}):null},Lt=()=>{const e=d(i=>i.services.find(s=>s.id==="6"));return(e==null?void 0:e.active)?t(B,{serviceId:"6",service:{title:"Dokumentacja",price:100,badges:["rycza\u0142t","po naprawie"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null},textToCopy:"Rycza\u0142t 100 z\u0142 za sporz\u0105dzenie dokumentacji"}):null},Kt=()=>{const e=d(f=>f.services.find(g=>g.id==="3")),{hours:n,rate:r,setHours:i,setRate:s}=d(f=>f.driveToPlace),o=d(f=>f.settings.distanceBeforeRepair),a=f=>{i(+f.target.value)},c=f=>{s(+f.target.value)};if(!(e==null?void 0:e.active))return null;const u=!n||!r||!o||n<0||r<0||o<0||n===0,m=`
      Dojazd i powrot z miejsca awarii:
      CZAS PRACY MECHANIKA ${n} h X STAWKA ${y(r)}/h + ${o*2} KM X ${y(ye)} = ${y(e.price)}
`.toUpperCase(),S=u?"Podaj: odleg\u0142o\u015B\u0107, stawk\u0119 oraz roboczogodziny \u017Ceby obliczy\u0107 warto\u015B\u0107":m;return t(B,{cantBeMixedWith:["2","1","5"],hasError:u,serviceId:"3",service:{active:!0,badges:["przed napraw\u0105"],price:e.price,title:"Dojazd do miejsca awarii",preventCombineGroup:null,serviceType:"before repair"},textToCopy:S,children:l(R,{children:[l(E,{children:[t(A,{children:"Roboczogodziny"}),t(N,{onChange:a,value:n,min:"0",placeholder:"RBH",type:"number"})]}),l(E,{children:[t(A,{children:"Stawka"}),t(N,{onChange:c,value:r,min:"0",placeholder:"stawka",type:"number"})]})]})})},Ce=[{name:"Audi A4",price:100,id:"1"},{name:"Audi A6",price:200,id:"2"},{name:"Audi A8",price:300,id:"3"}],Vt=(e,n,r)=>{const i=`Auto zast\u0119pcze: ${r}`,s=`Wynajem na ${n} dni, stawka ${y(e)} za dzie\u0144`,o=`Razem: ${y(e*n)}`;return[i,s,o].join(" | ")},$t=()=>{const[e,n]=b.exports.useState(0),[r,i]=b.exports.useState(0),[s,o]=b.exports.useState(""),a=d(f=>f.services.find(g=>g.id==="2")),c=d(f=>f.setServicePrice),p=f=>{const g=f.target.valueAsNumber;n(g),isFinite(g)&&isFinite(r)&&c("2",g*r)},u=f=>{var w;const g=(w=Ce.find(_=>_.name===f.target.value))==null?void 0:w.price;o(f.target.value),g&&i(g),isFinite(e)&&g&&isFinite(g)?c("2",e*g):c("2",0)},m=e>0&&s!==""&&r>0,S=m?Vt(r,e,s):"Nie wybrano modelu auta lub dni";return{days:e,daysInputHandler:p,carSelectHandler:u,shouldDisplayText:m,priceFromStore:a.price,textToCopy:S}},Ut=({name:e,price:n,model:r})=>t("option",{style:{fontSize:"12px",textAlign:"center"},value:r,children:`${e} - ${y(n)} / doba`},e),Gt=()=>{const{days:e,carSelectHandler:n,daysInputHandler:r,shouldDisplayText:i,priceFromStore:s,textToCopy:o}=$t();return l(B,{hasError:!i,serviceId:"2",service:{active:!0,badges:["przed napraw\u0105"],price:s,title:"Auto zast\u0119pcze",preventCombineGroup:null,serviceType:"before repair"},textToCopy:o,children:[l(E,{flex:"0 0 200px",children:[t(A,{children:"Model"}),t(Ue,{flex:"0 0 200px",onChange:n,placeholder:"Wybierz model",children:Ce.map(a=>t(Ut,{name:a.name,price:a.price,model:a.name},a.name))})]}),l(E,{flex:"0 0 200px",children:[t(A,{children:"Dni"}),t(N,{step:0,onChange:r,value:e,min:"0",placeholder:"days",type:"number"})]})]})},qt=()=>{const e=d(r=>r.services.find(i=>i.id==="4"));return(e==null?void 0:e.active)?t(B,{cantBeMixedWith:["5","1","2"],serviceId:"4",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:100,title:"Bonus za napraw\u0119 na miejscu",preventCombineGroup:null,serviceType:"after repair"},textToCopy:"Bonus 100 z\u0142 za napraw\u0119 na miejscu"}):null},Qt="https://api.nbp.pl/api/exchangerates/rates/A/EUR/?format=json",Jt=async()=>{const n=await(await fetch(Qt)).json();return{rate:n.rates[0].mid,date:n.rates[0].effectiveDate}},Xt=(e,n)=>{const r=60.03*e,i=n*1.41*e;return`OP\u0141ATA MANIPULACYJNA = 60,03 EURO NETTO  x KURS ${e}
   = ${y(r)}
  OP\u0141ATA ZA ODLEG\u0141O\u015A\u0106 1,41 EUR/km NETTO X ${n} km x KURS ${e} 
  = ${y(i)}
  RAZEM = ${y(r+i)}
  `},Yt=()=>{const e=d(o=>o.services.find(a=>a.id==="5")),n=d(o=>o.settings.distanceAfterRepair),r=d(o=>o.setEuroCourse),i=d(o=>o.euroCourse),s=e==null?void 0:e.active;return b.exports.useEffect(()=>{if(!s||n<50||(Date.now()-i.timestamp)/1e3/60<60)return;(async()=>{const c=await Jt();r(c.rate,Date.now())})()},[i,s,n]),s?n<50?t(B,{serviceId:"5",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:e.price,title:"Odwiezienie pojazdu do 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:`Odwiezienie pojazdu klienta do 50 km 300 z\u0142 netto\r
`}):t(B,{serviceId:"5",service:{active:!0,badges:["po naprawie"],price:e.price,title:"Odwiezienie pojazdu od 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:Xt(i.rate,n)}):null},Zt=(e,n)=>{const r=`Masa pojazdu: ${e==="below 3.5t"?"poni\u017Cej 3.5t":"3.5t-5.5t"}`,s=`Op\u0142ata manipulacyjna: ${y(M[e])}`,o=y(n*H[e]),a=`Op\u0142ata za odleg\u0142o\u015B\u0107: ${n} km X ${y(H[e])} = ${o}`,p=`Razem: ${y(n*H[e]+M[e])}`;return[r,s,a,p].join(" | ")},er=({serviceId:e})=>{const{distanceBeforeRepair:n,vehicleWeight:r}=d(c=>c.settings),i=d(c=>c.services.find(p=>p.id===e));if(!(i==null?void 0:i.active))return null;const o=Zt(r,n),a={title:"Holowanie",price:i.price,badges:["przed napraw\u0105"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null};return t(B,{cantBeMixedWith:["3","4"],serviceId:e,service:a,textToCopy:o})},tr=({drawerOpenHandler:e})=>{const n=d(s=>s.services).filter(s=>s.active).length>0,r=l(W,{children:[t(Lt,{}),t(er,{serviceId:"1"}),t(Gt,{}),t(Kt,{}),t(qt,{}),t(Yt,{})]}),i=t(me,{h:"100%",children:t(R,{children:t(Ge,{in:!0,children:t(k,{callback:e,keyboardKey:C.SHOW_DRAWER,children:l(L,{display:"flex",gap:".4rem",rounded:"3xl",onClick:e,children:[t(Be,{}),t(I,{children:"Dodaj us\u0142ug\u0119"})]})})})})});return t(P,{border:"2px",borderColor:"gray.600",overflowY:"auto",shadow:"dark-lg",rounded:"xl",transition:"opacity 0.3s ease-in-out",flex:"1",h:"100%",bg:"chakra-subtle-bg",children:n?r:i})},re=({children:e,text:n})=>l(P,{bg:"gray.800",shadow:"lg",w:"100%",p:"2",rounded:"md",children:[t(I,{children:n}),e]}),ne=({active:e,children:n,onClick:r})=>t(L,{border:"4px",borderColor:e?"green.500":"transparent",onClick:r,width:"100%",children:n}),rr=({isOpen:e,drawerCloseHandler:n})=>{const r=d(a=>a.services),i=d(a=>a.toggleService),[s,o]=r.reduce((a,c)=>(c.beforeRepair?a[0].push(c):a[1].push(c),a),[[],[]]);return l(qe,{isOpen:e,placement:"left",onClose:n,children:[t(G,{}),l(Qe,{children:[t(ge,{}),t(q,{children:"Wybierz us\u0142ug\u0119 mobilno\u015Bci"}),t(Q,{p:"2",children:l(P,{gap:"4",align:"center",h:"100%",children:[t(re,{text:"Przed napraw\u0105",children:s.map(a=>t(ne,{active:a.active,onClick:()=>i(a.id),children:a.title},a.id))}),t(re,{text:"Po naprawie",children:o.map(a=>t(ne,{active:a.active,onClick:()=>i(a.id),children:a.title},a.id))})]})})]})]})},nr=({service:e})=>{const n=y(e.price);return l(R,{w:"100%",justifyContent:"space-between",gap:"8px",children:[t("span",{children:e.title}),t("span",{children:n})]})},ir=({isOpen:e,onClose:n})=>{const r=d(i=>i.services).filter(i=>i.active&&i.price>0);return l(Je,{isCentered:!0,motionPreset:"slideInBottom",size:"xl",isOpen:e,onClose:n,children:[t(G,{}),l(Xe,{children:[t(q,{children:"Podsumowanie us\u0142ug"}),t(ge,{}),t(Q,{children:r.map(i=>t(nr,{service:i},i.id))}),t(le,{children:t(L,{children:"Drukuj"})})]})]})},or=()=>{const[e,n]=b.exports.useState(!1),{isOpen:r,onOpen:i,onClose:s}=ce(),[o]=U("(min-width: 800px)");return l(P,{overflow:"hidden",padding:o?"8":"0",gap:"16px",h:"100vh",children:[o&&t(ee,{summaryOpenHandler:i,drawerOpenHandler:()=>n(!0)}),t(tr,{drawerOpenHandler:()=>n(!0)}),!o&&t(ee,{summaryOpenHandler:i,drawerOpenHandler:()=>n(!0)}),t(rr,{isOpen:e,drawerCloseHandler:()=>n(!1)}),t(ir,{isOpen:r,onClose:s})]})};var be,ie=xe.exports;be=ie.createRoot,ie.hydrateRoot;const sr={initialColorMode:"dark",useSystemColorMode:!0},ar=ze({config:sr}),cr=new Ze,lr=document.getElementById("root"),ur=be(lr),dr=t(b.exports.StrictMode,{children:t(et,{client:cr,children:t(Ye,{theme:ar,children:t(we,{children:t(or,{})})})})});ur.render(dr);
