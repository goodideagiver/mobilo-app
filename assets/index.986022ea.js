import{r as b,a as c,j as t,F as _,b as be,B as xe}from"./vendor.2eb4e70c.js";import{c as ie}from"./zustand.d9e8c8dc.js";import{E as we,H as Te,D as Re,V as Ee,m as oe,n as Ae,p as Ie,A as ke,q as Be}from"./@chakra-ui/icons.ea23b253.js";import{V as D,K as ze,F as E,b as A,I as W,c as se,R as Oe,H as R,d as J,u as ae,e as $,f as j,A as De,M as U,g as je,h as G,i as q,j as ce,B as F,T,S as Pe,k as le,l as ue,m as H,n as de,C as He,o as I,p as pe,q as _e,r as he,s as fe,t as X,P as We,v as Ne,w as Me,x as Fe,y as Le,z as Ke,D as Ve,E as me,G as $e,J as Ue,L as Ge,N as qe,O as ve,Q as Qe,U as Je,W as Xe}from"./@chakra-ui/react.0a2a1b54.js";import{Q as Ye,a as Ze}from"./react-query.27f51779.js";import"./@emotion/react.25f65135.js";import"./@emotion/styled.a9120842.js";import"./framer-motion.105f128b.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const S=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),N={["below 3.5t"]:600,["3.5t-5.5t"]:800},P={["below 3.5t"]:4.9,["3.5t-5.5t"]:12.5},ge=.5,V=(e,n,r)=>e*n+r*2*ge,Y=(e,n)=>e*P[n]+N[n],et=(e,n,r)=>e.map(i=>i.id===r?{...i,textSummary:n}:i),tt=e=>({driveToPlace:{rate:0,hours:0,setRate:n=>e(r=>({...r,services:r.services.map(i=>i.id==="3"?{...i,price:V(n,r.driveToPlace.hours,r.settings.distanceBeforeRepair)}:i),driveToPlace:{...r.driveToPlace,rate:n}})),setHours:n=>e(r=>({...r,services:r.services.map(i=>i.id==="3"?{...i,price:V(r.driveToPlace.rate,n,r.settings.distanceBeforeRepair)}:i),driveToPlace:{...r.driveToPlace,hours:n}}))}}),rt=e=>({euroCourse:{rate:0,timestamp:0},setEuroCourse:(n,r)=>e(i=>({...i,euroCourse:{rate:n,timestamp:r}}))}),nt={TOW_TO_BREAKDOWN:"H",TOW_BACK:"J",DRIVE_TO_CLIENT:"K",RENT_CAR:"L",DOCUMENTATION:"B",BONUS:"N"},it={DISTANCE_TO_BREAKDOWN:"Q",DISTANCE_TOW_BACK:"W",VEHICLE_MASS:"E"},C={VIEW_SERVICES:"V",RESET:"R",SHOW_DRAWER:"D",FOCUS:it,REMOVE_SERVICE:nt},O={distanceAfterRepair:0,distanceBeforeRepair:0,vehicleWeight:"below 3.5t"},ot=e=>({settings:O,setVehicleWeight:n=>e(r=>({...r,settings:{...r.settings,vehicleWeight:n},services:r.services.map(i=>i.id==="1"?{...i,price:Y(r.settings.distanceBeforeRepair,n)}:i)})),setDistanceBeforeRepair:n=>e(r=>({...r,services:r.services.map(i=>i.id==="1"?{...i,price:Y(n,r.settings.vehicleWeight)}:i.id==="3"?{...i,price:V(r.driveToPlace.rate,r.driveToPlace.hours,n)}:i),settings:{...r.settings,distanceBeforeRepair:n}})),setDistanceAfterRepair:n=>e(r=>({...r,services:r.services.map(i=>i.id==="5"?{...i,price:n<50?300:n*1.41*4+60.03*4}:i),settings:{...r.settings,distanceAfterRepair:n}}))}),Z=[{title:"Holowanie z miejsca awarii",id:"1",mixGroup:1,price:N[O.vehicleWeight]+P[O.vehicleWeight]*O.distanceBeforeRepair,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.TOW_TO_BREAKDOWN},{title:"Auto zast\u0119pcze",id:"2",mixGroup:2,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.RENT_CAR},{title:"Dojazd do miejsca awarii",id:"3",mixGroup:1,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:C.REMOVE_SERVICE.DRIVE_TO_CLIENT},{title:"Bonus za napraw\u0119 na miejscu",id:"4",mixGroup:1,price:100,textSummary:"Bonus za napraw\u0119 na miejscu 100 z\u0142",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.BONUS},{title:"Odwiezienie auta",id:"5",mixGroup:1,price:O.distanceAfterRepair<50?300:O.distanceAfterRepair*1.41*4+60.03*4,textSummary:"",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.TOW_BACK},{title:"Dokumentacja",id:"6",mixGroup:1,price:100,textSummary:"Rycza\u0142t 100 z\u0142 za wykonanie dokumentacji",active:!1,deleteServiceShortcut:C.REMOVE_SERVICE.DOCUMENTATION}],st=e=>({services:Z,toggleService:n=>e(r=>({...r,services:r.services.map(i=>i.id===n?{...i,active:!i.active}:i)})),resetServices:()=>e(n=>({...n,services:Z})),setServicePrice:(n,r)=>e(i=>({...i,services:i.services.map(s=>s.id===n?{...s,price:r}:s)})),setServiceTextSummary:(n,r)=>e(i=>({...i,services:et(i.services,n,r)}))}),d=ie()((...e)=>({...ot(...e),...st(...e),...tt(...e),...rt(...e)})),M=e=>n=>{try{const r=e(n);return r instanceof Promise?r:{then(i){return M(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return M(i)(r)}}}},at=(e,n)=>(r,i,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:h=>h,version:0,merge:(h,x)=>({...x,...h}),...n},a=!1;const l=new Set,p=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...h)},i,s);const m=M(o.serialize),y=()=>{const h=o.partialize({...i()});let x;const v=m({state:h,version:o.version}).then(z=>u.setItem(o.name,z)).catch(z=>{x=z});if(x)throw x;return v},f=s.setState;s.setState=(h,x)=>{f(h,x),y()};const g=e((...h)=>{r(...h),y()},i,s);let w;const Q=()=>{var h;if(!u)return;a=!1,l.forEach(v=>v(i()));const x=((h=o.onRehydrateStorage)==null?void 0:h.call(o,i()))||void 0;return M(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var z;return w=o.merge(v,(z=i())!=null?z:g),r(w,!0),y()}).then(()=>{x?.(w,void 0),a=!0,p.forEach(v=>v(w))}).catch(v=>{x?.(void 0,v)})};return s.persist={setOptions:h=>{o={...o,...h},h.getStorage&&(u=h.getStorage())},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>Q(),hasHydrated:()=>a,onHydrate:h=>(l.add(h),()=>{l.delete(h)}),onFinishHydration:h=>(p.add(h),()=>{p.delete(h)})},Q(),w||g},ct=at,L=ie()(ct(e=>({extendedInfo:!0,show:()=>e({extendedInfo:!0}),hide:()=>e({extendedInfo:!1})}))),lt=(e,n)=>{const[r,i]=b.exports.useState(!1),s=b.exports.useCallback(a=>{a.shiftKey&&i(!0),a.key===e&&r&&n()},[r,e]),o=b.exports.useCallback(a=>{a.shiftKey||i(!1)},[r,e]);return b.exports.useEffect(()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",o)}),[s,o]),{modifierPressed:r}},ut="_wrapper_pg9d5_1",dt="_keyWrapper_pg9d5_9",pt="_scaleIn_pg9d5_1",ht="_left_pg9d5_41",ft="_scaleInLeft_pg9d5_1",K={wrapper:ut,keyWrapper:dt,scaleIn:pt,left:ht,scaleInLeft:ft},k=({children:e,keyboardKey:n,condition:r=!0,callback:i,direction:s})=>{const o=()=>{r&&i()},{modifierPressed:a}=lt(n,o);return c(D,{className:K.wrapper,children:[e,r&&a&&t("span",{className:`${K.keyWrapper} ${s==="left"?K.left:""}`,children:t(ze,{children:n.toString().toUpperCase()})})]})},mt=({inputHelperText:e,inputTitle:n,value:r,onChange:i,focusShortcut:s})=>{const o=b.exports.useRef(null),a=L(l=>l.extendedInfo);return c(E,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[t(A,{children:n}),t(k,{callback:()=>{o.current?.focus()},keyboardKey:s,children:t(W,{ref:o,type:"number",min:"0",value:r,onChange:i})}),a&&t(se,{children:e})]})},vt=()=>{const e=d(r=>r.setVehicleWeight);return{vehicleWeightInputHandler:r=>{(r==="3.5t-5.5t"||r==="below 3.5t")&&e(r)}}},gt=()=>{const{vehicleWeightInputHandler:e}=vt(),n=b.exports.useRef(null),r=()=>{const s=n.current?.querySelectorAll("input");s&&[...s].find(o=>o.checked)?.focus()},i=L(s=>s.extendedInfo);return c(E,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[t(A,{as:"legend",children:"Masa pojazdu"}),t(k,{keyboardKey:C.FOCUS.VEHICLE_MASS,callback:r,children:t(Oe,{ref:n,onChange:e,defaultValue:"below 3.5t",children:c(R,{spacing:"24px",children:[t(J,{value:"below 3.5t",children:"Poni\u017Cej 3.5t"}),t(J,{value:"3.5t-5.5t",children:"3.5t - 5.5t"})]})})}),i&&t(se,{children:"Do rozliczania holowania"})]})},St=()=>{const{setDistanceAfterRepair:e,setDistanceBeforeRepair:n,settings:r}=d(o=>o);return{distanceInputHandler:o=>{n(Number(o.target.value))},distanceAfterRepairInputHandler:o=>{e(Number(o.target.value))},distanceBeforeRepair:r.distanceBeforeRepair,distanceAfterRepair:r.distanceAfterRepair}},yt=()=>{const{distanceAfterRepair:e,distanceAfterRepairInputHandler:n,distanceBeforeRepair:r,distanceInputHandler:i}=St(),{isOpen:s,onOpen:o,onClose:a}=ae(),l=b.exports.useRef(null),[p]=$("(min-width: 800px)"),u=[{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107",value:r,onChange:i,focusShortcut:C.FOCUS.DISTANCE_TO_BREAKDOWN},{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107 odwiezienia",value:e,onChange:n,focusShortcut:C.FOCUS.DISTANCE_TOW_BACK}].map(y=>t(mt,{...y},y.inputTitle)),m=c(_,{children:[u," ",t(gt,{})]});return p?t(R,{h:"100%",rounded:"2xl",p:"4",shadow:"lg",border:"4px",borderColor:"gray.700",align:"baseline",children:m}):c(_,{children:[t(j,{colorScheme:"blue",size:"lg",rounded:"full",onClick:o,"aria-label":"Edytuj us\u0142ugi",icon:t(we,{fontSize:"3xl",m:"2"})}),t(De,{isOpen:s,leastDestructiveRef:l,onClose:a,children:t(U,{children:c(je,{maxWidth:"95%",alignSelf:"center",children:[t(G,{fontSize:"lg",fontWeight:"bold",children:"Edytuj us\u0142ugi"}),c(q,{children:[" ",t(D,{gap:8,h:"100%",borderColor:"gray.700",align:"baseline",children:m})]}),t(ce,{mt:"8",children:t(F,{ref:l,onClick:a,children:"Zamknij"})})]})})})]})},Ct=({drawerOpenHandler:e})=>t(k,{keyboardKey:C.SHOW_DRAWER,callback:e,children:t(T,{hasArrow:!0,label:"Menu z us\u0142ugami",children:t(j,{"aria-label":"Poka\u017C us\u0142ugi",onClick:e,children:t(Te,{})})})}),bt=()=>{const n=d(i=>i.services).filter(i=>i.active),r=n.filter(i=>i.price>0).length>0;return{servicesCount:n.length,hasServices:n.length>0,hasServicesWithValue:r}},xt=({summaryOpenHandler:e})=>{const{resetServices:n}=d(p=>p),{hasServices:r,hasServicesWithValue:i}=bt(),{extendedInfo:s,hide:o,show:a}=L(p=>p),l=p=>{p.target.checked?a():o()};return c(D,{children:[c(R,{children:[t(k,{condition:r,keyboardKey:C.RESET,callback:n,children:t(T,{hasArrow:!0,label:"Resetuj wszystko",children:t(j,{disabled:!r,onClick:n,"aria-label":"Resetuj wszystko",children:t(Re,{})})})}),t(k,{condition:i,keyboardKey:C.VIEW_SERVICES,callback:e,children:t(T,{hasArrow:!0,label:"Podsumowanie us\u0142ug",children:t(j,{disabled:!i,onClick:e,"aria-label":"Podsumowanie us\u0142ug",children:t(Ee,{})})})})]}),t(T,{hasArrow:!0,label:`Wy\u015Bwietl ${s?"mniej":"wi\u0119cej"} informacji`,placement:"left",children:t(E,{display:"flex",alignItems:"center",children:c(D,{children:[t(A,{htmlFor:"extended-info",mb:"0",children:"Informacje"}),t(Pe,{isChecked:s,onChange:l,id:"extended-info"})]})})})]})},wt=({activeServiceSummary:e,activeServices:n})=>{const r=n.length,i=r>0,s=S(e),o=L(a=>a.extendedInfo);return t(le,{h:"100%",rounded:"2xl",p:"4",shadow:"2xl",border:"4px",borderColor:"green.700",children:t(ue,{h:"100%",children:c(H,{children:[t(de,{children:c(R,{children:[i&&t(He,{size:"30px",bg:"green.700",children:r}),t(I,{children:"Razem"})]})}),t(pe,{children:s}),o&&t(_e,{children:"Ca\u0142kowita warto\u015B\u0107 us\u0142ug"})]})})})},Tt=({drawerOpenHandler:e,summaryOpenHandler:n})=>{const i=d(u=>u.services).filter(u=>u.active),s=i.reduce((u,m)=>u+m.price,0),o=d(u=>u.euroCourse),a=Boolean(o.rate&&o.rate>0),[l]=$("(min-width: 800px)");return c(he,{padding:l?"0":"8",w:"100%",align:"center",justify:"space-between",gap:"2",children:[t(Ct,{drawerOpenHandler:e}),t(yt,{}),a&&t(le,{padding:"2",rounded:"2xl",border:"4px",borderColor:"blue.800",h:"100%",children:t(fe,{h:"100%",children:c(D,{children:[t(I,{fontWeight:"bold",children:"Kurs EUR:"}),t(I,{children:S(o.rate)})]})})}),t(wt,{activeServices:i,activeServiceSummary:s}),t(xt,{summaryOpenHandler:n})]})},Rt=({badges:e,hasIncompatibleServices:n})=>{const r=e.map(o=>t(X,{colorScheme:"green",children:o}));return t(D,{flexBasis:"10%",children:n?t(X,{colorScheme:"purple",variant:"outline",children:"Niekompatybilna"}):r})},Et="_button_1wpqb_1",ee={button:Et},At=({children:e,text:n,onCopy:r})=>c(We,{children:[t(Ne,{children:t("button",{className:ee.button,children:t(T,{hasArrow:!0,label:"Poka\u017C ca\u0142o\u015B\u0107",children:e})})}),c(Me,{shadow:"2xl",children:[t(Fe,{}),t(Le,{}),t(Ke,{children:"Informacje o us\u0142udze"}),t(Ve,{children:t(T,{hasArrow:!0,label:"Skopiuj tekst",children:t("button",{className:ee.button,onClick:r,children:n.split("|").map(i=>t("p",{children:i}))})})})]})]}),Se=({children:e,hasCopied:n})=>t(T,{closeOnClick:!1,bg:n?"green.500":"gray.500",hasArrow:!0,label:n?"Skopiowano":"Skopiuj",children:e}),It=({hasCopied:e,onCopy:n})=>t(Se,{hasCopied:e,children:t(j,{onClick:n,"aria-label":"Skopiuj do schowka",children:e?t(oe,{}):t(Ae,{})})}),kt={justifyContent:"space-between",flex:"0 0 350px",bg:"chakra-body-bg",rounded:"md",shadow:"md",p:"2"},Bt={fontSize:"xs",fontFamily:"mono",maxH:"4em",overflow:"auto"},zt={fontStyle:"italic"},Ot={border:"2px",borderColor:"red.700"},Dt=e=>{const n={\u0105:"a",\u0107:"c",\u0119:"e",\u0142:"l",\u0144:"n",\u00F3:"o",\u015B:"s",\u017A:"z",\u017C:"z"};return e.toLowerCase().replace(/[ąćęłńóśźż]/g,r=>n[r]).toUpperCase()},jt=(e="",n)=>{const r=Dt(e).split("|").map(p=>p.trim()).join(`
`).trim(),{onCopy:i,hasCopied:s}=me(r);return{onCopy:()=>{i(),navigator.clipboard.writeText(r)},hasCopied:s,errorStyle:n?Ot:{},textStyle:n?zt:{}}},Pt=({textToCopy:e,hasError:n})=>{const{errorStyle:r,hasCopied:i,textStyle:s,onCopy:o}=jt(e,n);return e?c(R,{...kt,...r,children:[t(At,{onCopy:o,text:e,children:t(I,{...s,...Bt,children:e.split("|").map(a=>t("p",{children:a}))})}),t(It,{hasCopied:i,onCopy:o})]}):null},Ht=({onDelete:e})=>t(T,{hasArrow:!0,label:"Usu\u0144 us\u0142ug\u0119",children:t(j,{onClick:e,"aria-label":"Usu\u0144 us\u0142ug\u0119",children:t(Ie,{})})}),_t=({price:e})=>{const n=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),{onCopy:r,hasCopied:i}=me(e.toFixed(2));return t(ue,{display:"flex",justifyContent:"center",w:"fit-content",flex:"0 0 120px",children:t(Se,{hasCopied:i,children:c("button",{onClick:()=>{r(),navigator.clipboard.writeText(e.toString())},children:[t(de,{children:"Op\u0142ata"}),t(pe,{whiteSpace:"nowrap",children:i?t(oe,{}):n})]})})})},Wt=({children:e,shortcutKey:n,serviceDeleteHandler:r})=>n?t(k,{direction:"left",callback:r,keyboardKey:n,children:e}):t(_,{children:e}),Nt=e=>{if(!e)return{hasErrors:!1};const i=d(s=>s.services).filter(s=>s.active).filter(s=>e.includes(s.id));return{hasErrors:i.length>0,conflictingServices:i}},Mt=(e,n)=>{const r=d(m=>m.services.find(y=>y.id===e)),i=r?.active,s=d(m=>m.toggleService),o=()=>{s(e)},{hasErrors:a,conflictingServices:l}=Nt(n),p=a?"red.900":"transparent",u=`Ta us\u0142uga nie mo\u017Ce by\u0107 \u0142\u0105czona z: ${l?.map(m=>m.title).join(", ")}`;return{conflictingServices:l,hasErrors:a,bgColor:p,isActive:i,deleteServiceButtonHandler:o,conflictingServicesText:u,shortcutKey:r?.deleteServiceShortcut}},Ft={gap:"4",borderBottom:"2px",borderColor:"gray.600",p:"2",px:"4",align:"center",justify:"space-between",w:"100%"},B=({service:e,textToCopy:n,children:r,serviceId:i,hasError:s,cantBeMixedWith:o})=>{const{title:a,price:l,badges:p}=e,{bgColor:u,conflictingServicesText:m,deleteServiceButtonHandler:y,hasErrors:f,isActive:g,shortcutKey:w}=Mt(i,o);return g?c(he,{...Ft,bg:u,children:[t(I,{fontWeight:"bold",flex:"1 0 100px",children:a}),r,t(Rt,{hasIncompatibleServices:f,badges:p}),t(Pt,{hasError:s||f,textToCopy:f?m:n}),t(_t,{price:l}),t(Wt,{shortcutKey:w,serviceDeleteHandler:y,children:t(Ht,{onDelete:y})})]}):null},Lt=()=>d(i=>i.services.find(s=>s.id==="6"))?.active?t(B,{serviceId:"6",service:{title:"Dokumentacja",price:100,badges:["rycza\u0142t","po naprawie"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null},textToCopy:"Rycza\u0142t 100 z\u0142 za sporz\u0105dzenie dokumentacji"}):null,Kt=()=>{const e=d(f=>f.services.find(g=>g.id==="3")),{hours:n,rate:r,setHours:i,setRate:s}=d(f=>f.driveToPlace),o=d(f=>f.settings.distanceBeforeRepair),a=f=>{i(+f.target.value)},l=f=>{s(+f.target.value)};if(!e?.active)return null;const u=!n||!r||!o||n<0||r<0||o<0||n===0,m=`
      Dojazd i powrot z miejsca awarii:
      CZAS PRACY MECHANIKA ${n} h X STAWKA ${S(r)}/h + ${o*2} KM X ${S(ge)} = ${S(e.price)}
`.toUpperCase(),y=u?"Podaj: odleg\u0142o\u015B\u0107, stawk\u0119 oraz roboczogodziny \u017Ceby obliczy\u0107 warto\u015B\u0107":m;return t(B,{cantBeMixedWith:["2","1","5"],hasError:u,serviceId:"3",service:{active:!0,badges:["przed napraw\u0105"],price:e.price,title:"Dojazd do miejsca awarii",preventCombineGroup:null,serviceType:"before repair"},textToCopy:y,children:c(R,{children:[c(E,{children:[t(A,{children:"Roboczogodziny"}),t(W,{onChange:a,value:n,min:"0",placeholder:"RBH",type:"number"})]}),c(E,{children:[t(A,{children:"Stawka"}),t(W,{onChange:l,value:r,min:"0",placeholder:"stawka",type:"number"})]})]})})},ye=[{name:"Audi A4",price:100,id:"1"},{name:"Audi A6",price:200,id:"2"},{name:"Audi A8",price:300,id:"3"}],Vt=(e,n,r)=>{const i=`Auto zast\u0119pcze: ${r}`,s=`Wynajem na ${n} dni, stawka ${S(e)} za dzie\u0144`,o=`Razem: ${S(e*n)}`;return[i,s,o].join(" | ")},$t=()=>{const[e,n]=b.exports.useState(0),[r,i]=b.exports.useState(0),[s,o]=b.exports.useState(""),a=d(f=>f.services.find(g=>g.id==="2")),l=d(f=>f.setServicePrice),p=f=>{const g=f.target.valueAsNumber;n(g),isFinite(g)&&isFinite(r)&&l("2",g*r)},u=f=>{const g=ye.find(w=>w.name===f.target.value)?.price;o(f.target.value),g&&i(g),isFinite(e)&&g&&isFinite(g)?l("2",e*g):l("2",0)},m=e>0&&s!==""&&r>0,y=m?Vt(r,e,s):"Nie wybrano modelu auta lub dni";return{days:e,daysInputHandler:p,carSelectHandler:u,shouldDisplayText:m,priceFromStore:a.price,textToCopy:y}},Ut=({name:e,price:n,model:r})=>t("option",{style:{fontSize:"12px",textAlign:"center"},value:r,children:`${e} - ${S(n)} / doba`},e),Gt=()=>{const{days:e,carSelectHandler:n,daysInputHandler:r,shouldDisplayText:i,priceFromStore:s,textToCopy:o}=$t();return c(B,{hasError:!i,serviceId:"2",service:{active:!0,badges:["przed napraw\u0105"],price:s,title:"Auto zast\u0119pcze",preventCombineGroup:null,serviceType:"before repair"},textToCopy:o,children:[c(E,{flex:"0 0 200px",children:[t(A,{children:"Model"}),t($e,{flex:"0 0 200px",onChange:n,placeholder:"Wybierz model",children:ye.map(a=>t(Ut,{name:a.name,price:a.price,model:a.name},a.name))})]}),c(E,{flex:"0 0 200px",children:[t(A,{children:"Dni"}),t(W,{step:0,onChange:r,value:e,min:"0",placeholder:"days",type:"number"})]})]})},qt=()=>d(r=>r.services.find(i=>i.id==="4"))?.active?t(B,{cantBeMixedWith:["5","1","2"],serviceId:"4",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:100,title:"Bonus za napraw\u0119 na miejscu",preventCombineGroup:null,serviceType:"after repair"},textToCopy:"Bonus 100 z\u0142 za napraw\u0119 na miejscu"}):null,Qt="https://api.nbp.pl/api/exchangerates/rates/A/EUR/?format=json",Jt=async()=>{const n=await(await fetch(Qt)).json();return{rate:n.rates[0].mid,date:n.rates[0].effectiveDate}},Xt=(e,n)=>{const r=60.03*e,i=n*1.41*e;return`OP\u0141ATA MANIPULACYJNA = 60,03 EURO NETTO  x KURS ${e}
   = ${S(r)}
  OP\u0141ATA ZA ODLEG\u0141O\u015A\u0106 1,41 EUR/km NETTO X ${n} km x KURS ${e} 
  = ${S(i)}
  RAZEM = ${S(r+i)}
  `},Yt=()=>{const e=d(o=>o.services.find(a=>a.id==="5")),n=d(o=>o.settings.distanceAfterRepair),r=d(o=>o.setEuroCourse),i=d(o=>o.euroCourse),s=e?.active;return b.exports.useEffect(()=>{if(!s||n<50||(Date.now()-i.timestamp)/1e3/60<60)return;(async()=>{const l=await Jt();r(l.rate,Date.now())})()},[i,s,n]),s?n<50?t(B,{serviceId:"5",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:e.price,title:"Odwiezienie pojazdu do 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:`Odwiezienie pojazdu klienta do 50 km 300 z\u0142 netto\r
`}):t(B,{serviceId:"5",service:{active:!0,badges:["po naprawie"],price:e.price,title:"Odwiezienie pojazdu od 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:Xt(i.rate,n)}):null},Zt=(e,n)=>{const r=`Masa pojazdu: ${e==="below 3.5t"?"poni\u017Cej 3.5t":"3.5t-5.5t"}`,s=`Op\u0142ata manipulacyjna: ${S(N[e])}`,o=S(n*P[e]),a=`Op\u0142ata za odleg\u0142o\u015B\u0107: ${n} km X ${S(P[e])} = ${o}`,p=`Razem: ${S(n*P[e]+N[e])}`;return[r,s,a,p].join(" | ")},er=({serviceId:e})=>{const{distanceBeforeRepair:n,vehicleWeight:r}=d(l=>l.settings),i=d(l=>l.services.find(p=>p.id===e));if(!i?.active)return null;const o=Zt(r,n),a={title:"Holowanie",price:i.price,badges:["przed napraw\u0105"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null};return t(B,{cantBeMixedWith:["3","4"],serviceId:e,service:a,textToCopy:o})},tr=({drawerOpenHandler:e})=>{const n=d(s=>s.services).filter(s=>s.active).length>0,r=c(_,{children:[t(Lt,{}),t(er,{serviceId:"1"}),t(Gt,{}),t(Kt,{}),t(qt,{}),t(Yt,{})]}),i=t(fe,{h:"100%",children:t(R,{children:t(Ue,{in:!0,children:t(k,{callback:e,keyboardKey:C.SHOW_DRAWER,children:c(F,{display:"flex",gap:".4rem",rounded:"3xl",onClick:e,children:[t(ke,{}),t(I,{children:"Dodaj us\u0142ug\u0119"})]})})})})});return t(H,{border:"2px",borderColor:"gray.600",overflowY:"auto",shadow:"dark-lg",rounded:"xl",transition:"opacity 0.3s ease-in-out",flex:"1",h:"100%",bg:"chakra-subtle-bg",children:n?r:i})},te=({children:e,text:n})=>c(H,{bg:"gray.800",shadow:"lg",w:"100%",p:"2",rounded:"md",children:[t(I,{children:n}),e]}),re=({active:e,children:n,onClick:r})=>t(F,{border:"4px",borderColor:e?"green.500":"transparent",onClick:r,width:"100%",children:n}),rr=({isOpen:e,drawerCloseHandler:n})=>{const r=d(a=>a.services),i=d(a=>a.toggleService),[s,o]=r.reduce((a,l)=>(l.beforeRepair?a[0].push(l):a[1].push(l),a),[[],[]]);return c(Ge,{isOpen:e,placement:"left",onClose:n,children:[t(U,{}),c(qe,{children:[t(ve,{}),t(G,{children:"Wybierz us\u0142ug\u0119 mobilno\u015Bci"}),t(q,{p:"2",children:c(H,{gap:"4",align:"center",h:"100%",children:[t(te,{text:"Przed napraw\u0105",children:s.map(a=>t(re,{active:a.active,onClick:()=>i(a.id),children:a.title},a.id))}),t(te,{text:"Po naprawie",children:o.map(a=>t(re,{active:a.active,onClick:()=>i(a.id),children:a.title},a.id))})]})})]})]})},nr=({service:e})=>{const n=S(e.price);return c(R,{w:"100%",justifyContent:"space-between",gap:"8px",children:[t("span",{children:e.title}),t("span",{children:n})]})},ir=({isOpen:e,onClose:n})=>{const r=d(i=>i.services).filter(i=>i.active&&i.price>0);return c(Qe,{isCentered:!0,motionPreset:"slideInBottom",size:"xl",isOpen:e,onClose:n,children:[t(U,{}),c(Je,{children:[t(G,{children:"Podsumowanie us\u0142ug"}),t(ve,{}),t(q,{children:r.map(i=>t(nr,{service:i},i.id))}),t(ce,{children:t(F,{children:"Drukuj"})})]})]})},or=()=>{const[e,n]=b.exports.useState(!1),{isOpen:r,onOpen:i,onClose:s}=ae(),[o]=$("(min-width: 800px)");return c(H,{overflow:"hidden",padding:o?"8":"0",gap:"16px",h:"100vh",children:[t(Tt,{summaryOpenHandler:i,drawerOpenHandler:()=>n(!0)}),t(tr,{drawerOpenHandler:()=>n(!0)}),t(rr,{isOpen:e,drawerCloseHandler:()=>n(!1)}),t(ir,{isOpen:r,onClose:s})]})};var Ce,ne=be.exports;Ce=ne.createRoot,ne.hydrateRoot;const sr={initialColorMode:"dark",useSystemColorMode:!0},ar=Be({config:sr}),cr=new Ye,lr=document.getElementById("root"),ur=Ce(lr),dr=t(b.exports.StrictMode,{children:t(Ze,{client:cr,children:t(Xe,{theme:ar,children:t(xe,{children:t(or,{})})})})});ur.render(dr);
//# sourceMappingURL=index.986022ea.js.map
