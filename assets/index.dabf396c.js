import{b as ge,r as x,a as l,j as n,F as Z,B as Se}from"./vendor.21311c1b.js";import{c as ee}from"./zustand.91806683.js";import{V as P,K as Ce,F as A,b as E,I as N,c as te,R as be,H as R,d as $,T,e as H,S as xe,B as re,f as ne,g as j,h as oe,C as we,i as I,j as ie,k as Te,l as se,m as ae,n as U,P as Re,o as Ae,p as Ee,q as Ie,r as ke,s as Be,t as ze,u as ce,v as Oe,w as De,x as V,D as Pe,M as le,y as He,z as ue,A as de,E as pe,G as je,J as _e,L as Ne,N as We,O as Me}from"./@chakra-ui/react.4d508072.js";import{H as Fe,D as Le,V as Ke,m as he,n as Ve,p as $e,A as Ue,q as Ge}from"./@chakra-ui/icons.a4ed0aff.js";import{Q as qe,a as Je}from"./react-query.83f6c810.js";import"./framer-motion.a63458ea.js";import"./@emotion/react.0b23e939.js";import"./@emotion/styled.1cafd5f6.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var fe,G=ge.exports;fe=G.createRoot,G.hydrateRoot;const W={["below 3.5t"]:600,["3.5t-5.5t"]:800},D={["below 3.5t"]:4.9,["3.5t-5.5t"]:12.5},me=.5,K=(e,r,t)=>e*r+t*2*me,q=(e,r)=>e*D[r]+W[r],Qe=(e,r,t)=>e.map(o=>o.id===t?{...o,textSummary:r}:o),Xe=e=>({driveToPlace:{rate:0,hours:0,setRate:r=>e(t=>({...t,services:t.services.map(o=>o.id==="3"?{...o,price:K(r,t.driveToPlace.hours,t.settings.distanceBeforeRepair)}:o),driveToPlace:{...t.driveToPlace,rate:r}})),setHours:r=>e(t=>({...t,services:t.services.map(o=>o.id==="3"?{...o,price:K(t.driveToPlace.rate,r,t.settings.distanceBeforeRepair)}:o),driveToPlace:{...t.driveToPlace,hours:r}}))}}),Ye=e=>({euroCourse:{rate:0,timestamp:0},setEuroCourse:(r,t)=>e(o=>({...o,euroCourse:{rate:r,timestamp:t}}))}),Ze={TOW_TO_BREAKDOWN:"H",TOW_BACK:"J",DRIVE_TO_CLIENT:"K",RENT_CAR:"L",DOCUMENTATION:"B",BONUS:"N"},et={DISTANCE_TO_BREAKDOWN:"Q",DISTANCE_TOW_BACK:"W",VEHICLE_MASS:"E"},S={VIEW_SERVICES:"V",RESET:"R",SHOW_DRAWER:"D",FOCUS:et,REMOVE_SERVICE:Ze},O={distanceAfterRepair:0,distanceBeforeRepair:0,vehicleWeight:"below 3.5t"},tt=e=>({settings:O,setVehicleWeight:r=>e(t=>({...t,settings:{...t.settings,vehicleWeight:r},services:t.services.map(o=>o.id==="1"?{...o,price:q(t.settings.distanceBeforeRepair,r)}:o)})),setDistanceBeforeRepair:r=>e(t=>({...t,services:t.services.map(o=>o.id==="1"?{...o,price:q(r,t.settings.vehicleWeight)}:o.id==="3"?{...o,price:K(t.driveToPlace.rate,t.driveToPlace.hours,r)}:o),settings:{...t.settings,distanceBeforeRepair:r}})),setDistanceAfterRepair:r=>e(t=>({...t,services:t.services.map(o=>o.id==="5"?{...o,price:r<50?300:r*1.41*4+60.03*4}:o),settings:{...t.settings,distanceAfterRepair:r}}))}),J=[{title:"Holowanie z miejsca awarii",id:"1",mixGroup:1,price:W[O.vehicleWeight]+D[O.vehicleWeight]*O.distanceBeforeRepair,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:S.REMOVE_SERVICE.TOW_TO_BREAKDOWN},{title:"Auto zast\u0119pcze",id:"2",mixGroup:2,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:S.REMOVE_SERVICE.RENT_CAR},{title:"Dojazd do miejsca awarii",id:"3",mixGroup:1,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:S.REMOVE_SERVICE.DRIVE_TO_CLIENT},{title:"Bonus za napraw\u0119 na miejscu",id:"4",mixGroup:1,price:100,textSummary:"Bonus za napraw\u0119 na miejscu 100 z\u0142",active:!1,deleteServiceShortcut:S.REMOVE_SERVICE.BONUS},{title:"Odwiezienie auta",id:"5",mixGroup:1,price:O.distanceAfterRepair<50?300:O.distanceAfterRepair*1.41*4+60.03*4,textSummary:"",active:!1,deleteServiceShortcut:S.REMOVE_SERVICE.TOW_BACK},{title:"Dokumentacja",id:"6",mixGroup:1,price:100,textSummary:"Rycza\u0142t 100 z\u0142 za wykonanie dokumentacji",active:!1,deleteServiceShortcut:S.REMOVE_SERVICE.DOCUMENTATION}],rt=e=>({services:J,toggleService:r=>e(t=>({...t,services:t.services.map(o=>o.id===r?{...o,active:!o.active}:o)})),resetServices:()=>e(r=>({...r,services:J})),setServicePrice:(r,t)=>e(o=>({...o,services:o.services.map(s=>s.id===r?{...s,price:t}:s)})),setServiceTextSummary:(r,t)=>e(o=>({...o,services:Qe(o.services,r,t)}))}),u=ee()((...e)=>({...tt(...e),...rt(...e),...Xe(...e),...Ye(...e)})),M=e=>r=>{try{const t=e(r);return t instanceof Promise?t:{then(o){return M(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return M(o)(t)}}}},nt=(e,r)=>(t,o,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:d=>d,version:0,merge:(d,b)=>({...b,...d}),...r},a=!1;const c=new Set,p=new Set;let m;try{m=i.getStorage()}catch{}if(!m)return e((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...d)},o,s);const g=M(i.serialize),C=()=>{const d=i.partialize({...o()});let b;const f=g({state:d,version:i.version}).then(z=>m.setItem(i.name,z)).catch(z=>{b=z});if(b)throw b;return f},h=s.setState;s.setState=(d,b)=>{h(d,b),C()};const v=e((...d)=>{t(...d),C()},o,s);let w;const _=()=>{var d;if(!m)return;a=!1,c.forEach(f=>f(o()));const b=((d=i.onRehydrateStorage)==null?void 0:d.call(i,o()))||void 0;return M(m.getItem.bind(m))(i.name).then(f=>{if(f)return i.deserialize(f)}).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate)return i.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var z;return w=i.merge(f,(z=o())!=null?z:v),t(w,!0),C()}).then(()=>{b==null||b(w,void 0),a=!0,p.forEach(f=>f(w))}).catch(f=>{b==null||b(void 0,f)})};return s.persist={setOptions:d=>{i={...i,...d},d.getStorage&&(m=d.getStorage())},clearStorage:()=>{m==null||m.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>a,onHydrate:d=>(c.add(d),()=>{c.delete(d)}),onFinishHydration:d=>(p.add(d),()=>{p.delete(d)})},_(),w||v},ot=nt,F=ee()(ot(e=>({extendedInfo:!0,show:()=>e({extendedInfo:!0}),hide:()=>e({extendedInfo:!1})}))),it=(e,r)=>{const[t,o]=x.exports.useState(!1),s=x.exports.useCallback(a=>{a.shiftKey&&o(!0),a.key===e&&t&&r()},[t,e]),i=x.exports.useCallback(a=>{a.shiftKey||o(!1)},[t,e]);return x.exports.useEffect(()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",i)}),[s,i]),{modifierPressed:t}},st="_wrapper_pg9d5_1",at="_keyWrapper_pg9d5_9",ct="_scaleIn_pg9d5_1",lt="_left_pg9d5_41",ut="_scaleInLeft_pg9d5_1",L={wrapper:st,keyWrapper:at,scaleIn:ct,left:lt,scaleInLeft:ut},k=({children:e,keyboardKey:r,condition:t=!0,callback:o,direction:s})=>{const i=()=>{t&&o()},{modifierPressed:a}=it(r,i);return l(P,{className:L.wrapper,children:[e,t&&a&&n("span",{className:`${L.keyWrapper} ${s==="left"?L.left:""}`,children:n(Ce,{children:r.toString().toUpperCase()})})]})},dt=({inputHelperText:e,inputTitle:r,value:t,onChange:o,focusShortcut:s})=>{const i=x.exports.useRef(null),a=F(c=>c.extendedInfo);return l(A,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[n(E,{children:r}),n(k,{callback:()=>{var c;(c=i.current)==null||c.focus()},keyboardKey:s,children:n(N,{ref:i,type:"number",min:"0",value:t,onChange:o})}),a&&n(te,{children:e})]})},pt=()=>{const e=u(t=>t.setVehicleWeight);return{vehicleWeightInputHandler:t=>{(t==="3.5t-5.5t"||t==="below 3.5t")&&e(t)}}},ht=()=>{const{vehicleWeightInputHandler:e}=pt(),r=x.exports.useRef(null),t=()=>{var i,a;const s=(i=r.current)==null?void 0:i.querySelectorAll("input");s&&((a=[...s].find(c=>c.checked))==null||a.focus())},o=F(s=>s.extendedInfo);return l(A,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[n(E,{as:"legend",children:"Masa pojazdu"}),n(k,{keyboardKey:S.FOCUS.VEHICLE_MASS,callback:t,children:n(be,{ref:r,onChange:e,defaultValue:"below 3.5t",children:l(R,{spacing:"24px",children:[n($,{value:"below 3.5t",children:"Poni\u017Cej 3.5t"}),n($,{value:"3.5t-5.5t",children:"3.5t - 5.5t"})]})})}),o&&n(te,{children:"Do rozliczania holowania"})]})},ft=()=>{const{setDistanceAfterRepair:e,setDistanceBeforeRepair:r,settings:t}=u(i=>i);return{distanceInputHandler:i=>{r(Number(i.target.value))},distanceAfterRepairInputHandler:i=>{e(Number(i.target.value))},distanceBeforeRepair:t.distanceBeforeRepair,distanceAfterRepair:t.distanceAfterRepair}},mt=()=>{const{distanceAfterRepair:e,distanceAfterRepairInputHandler:r,distanceBeforeRepair:t,distanceInputHandler:o}=ft(),s=[{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107",value:t,onChange:o,focusShortcut:S.FOCUS.DISTANCE_TO_BREAKDOWN},{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107 odwiezienia",value:e,onChange:r,focusShortcut:S.FOCUS.DISTANCE_TOW_BACK}].map(i=>n(dt,{...i},i.inputTitle));return l(R,{h:"100%",rounded:"2xl",p:"4",shadow:"lg",border:"4px",borderColor:"gray.700",align:"baseline",children:[s," ",n(ht,{})]})},vt=({drawerOpenHandler:e})=>n(k,{keyboardKey:S.SHOW_DRAWER,callback:e,children:n(T,{hasArrow:!0,label:"Menu z us\u0142ugami",children:n(H,{"aria-label":"Poka\u017C us\u0142ugi",onClick:e,children:n(Fe,{})})})}),yt=()=>{const r=u(o=>o.services).filter(o=>o.active),t=r.filter(o=>o.price>0).length>0;return{servicesCount:r.length,hasServices:r.length>0,hasServicesWithValue:t}},gt=({summaryOpenHandler:e})=>{const{resetServices:r}=u(p=>p),{hasServices:t,hasServicesWithValue:o}=yt(),{extendedInfo:s,hide:i,show:a}=F(p=>p),c=p=>{p.target.checked?a():i()};return l(P,{children:[l(R,{children:[n(k,{condition:t,keyboardKey:S.RESET,callback:r,children:n(T,{hasArrow:!0,label:"Resetuj wszystko",children:n(H,{disabled:!t,onClick:r,"aria-label":"Resetuj wszystko",children:n(Le,{})})})}),n(k,{condition:o,keyboardKey:S.VIEW_SERVICES,callback:e,children:n(T,{hasArrow:!0,label:"Podsumowanie us\u0142ug",children:n(H,{disabled:!o,onClick:e,"aria-label":"Podsumowanie us\u0142ug",children:n(Ke,{})})})})]}),n(T,{hasArrow:!0,label:`Wy\u015Bwietl ${s?"mniej":"wi\u0119cej"} informacji`,placement:"left",children:n(A,{display:"flex",alignItems:"center",children:l(P,{children:[n(E,{htmlFor:"extended-info",mb:"0",children:"Informacje"}),n(xe,{isChecked:s,onChange:c,id:"extended-info"})]})})})]})},y=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),St=({activeServiceSummary:e,activeServices:r})=>{const t=r.length,o=t>0,s=y(e),i=F(a=>a.extendedInfo);return n(re,{h:"100%",rounded:"2xl",p:"4",shadow:"2xl",border:"4px",borderColor:"green.700",children:n(ne,{h:"100%",children:l(j,{children:[n(oe,{children:l(R,{children:[o&&n(we,{size:"30px",bg:"green.700",children:t}),n(I,{children:"Razem"})]})}),n(ie,{children:s}),i&&n(Te,{children:"Ca\u0142kowita warto\u015B\u0107 us\u0142ug"})]})})})},Ct=({drawerOpenHandler:e,summaryOpenHandler:r})=>{const o=u(c=>c.services).filter(c=>c.active),s=o.reduce((c,p)=>c+p.price,0),i=u(c=>c.euroCourse),a=Boolean(i.rate&&i.rate>0);return l(se,{w:"100%",align:"center",justify:"space-between",gap:"2",children:[n(vt,{drawerOpenHandler:e}),n(mt,{}),a&&n(re,{padding:"8",rounded:"2xl",border:"4px",borderColor:"blue.800",h:"100%",children:n(ae,{h:"100%",children:l(P,{children:[n(I,{fontWeight:"bold",children:"Kurs EUR:"}),n(I,{children:y(i.rate)})]})})}),n(St,{activeServices:o,activeServiceSummary:s}),n(gt,{summaryOpenHandler:r})]})},bt=({badges:e,hasIncompatibleServices:r})=>{const t=e.map(i=>n(U,{colorScheme:"green",children:i}));return n(P,{flexBasis:"10%",children:r?n(U,{colorScheme:"purple",variant:"outline",children:"Niekompatybilna"}):t})},xt="_button_1wpqb_1",Q={button:xt},wt=({children:e,text:r,onCopy:t})=>l(Re,{children:[n(Ae,{children:n("button",{className:Q.button,children:n(T,{hasArrow:!0,label:"Poka\u017C ca\u0142o\u015B\u0107",children:e})})}),l(Ee,{shadow:"2xl",children:[n(Ie,{}),n(ke,{}),n(Be,{children:"Informacje o us\u0142udze"}),n(ze,{children:n(T,{hasArrow:!0,label:"Skopiuj tekst",children:n("button",{className:Q.button,onClick:t,children:r.split("|").map(o=>n("p",{children:o}))})})})]})]}),Tt={justifyContent:"space-between",flex:"0 0 350px",bg:"chakra-body-bg",rounded:"md",shadow:"md",p:"2"},Rt={fontSize:"xs",fontFamily:"mono",maxH:"4em",overflow:"auto"},At={fontStyle:"italic"},Et={border:"2px",borderColor:"red.700"},ve=({children:e,hasCopied:r})=>n(T,{closeOnClick:!1,bg:r?"green.500":"gray.500",hasArrow:!0,label:r?"Skopiowano":"Skopiuj",children:e}),It=({hasCopied:e,onCopy:r})=>n(ve,{hasCopied:e,children:n(H,{onClick:r,"aria-label":"Skopiuj do schowka",children:e?n(he,{}):n(Ve,{})})}),kt=e=>{const r={\u0105:"a",\u0107:"c",\u0119:"e",\u0142:"l",\u0144:"n",\u00F3:"o",\u015B:"s",\u017A:"z",\u017C:"z"};return e.toLowerCase().replace(/[ąćęłńóśźż]/g,t=>r[t]).toUpperCase()},Bt=(e="",r)=>{const t=kt(e).split("|").map(p=>p.trim()).join(`
`).trim(),{onCopy:o,hasCopied:s}=ce(t);return{onCopy:()=>{o(),navigator.clipboard.writeText(t)},hasCopied:s,errorStyle:r?Et:{},textStyle:r?At:{}}},zt=({textToCopy:e,hasError:r})=>{const{errorStyle:t,hasCopied:o,textStyle:s,onCopy:i}=Bt(e,r);return e?l(R,{...Tt,...t,children:[n(wt,{onCopy:i,text:e,children:n(I,{...s,...Rt,children:e.split("|").map(a=>n("p",{children:a}))})}),n(It,{hasCopied:o,onCopy:i})]}):null},Ot=({onDelete:e})=>n(T,{hasArrow:!0,label:"Usu\u0144 us\u0142ug\u0119",children:n(H,{onClick:e,"aria-label":"Usu\u0144 us\u0142ug\u0119",children:n($e,{})})}),Dt=({price:e})=>{const r=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),{onCopy:t,hasCopied:o}=ce(e.toFixed(2));return n(ne,{display:"flex",justifyContent:"center",w:"fit-content",flex:"0 0 120px",children:n(ve,{hasCopied:o,children:l("button",{onClick:()=>{t(),navigator.clipboard.writeText(e.toString())},children:[n(oe,{children:"Op\u0142ata"}),n(ie,{whiteSpace:"nowrap",children:o?n(he,{}):r})]})})})},Pt=({children:e,shortcutKey:r,serviceDeleteHandler:t})=>r?n(k,{direction:"left",callback:t,keyboardKey:r,children:e}):n(Z,{children:e}),Ht=e=>{if(!e)return{hasErrors:!1};const o=u(s=>s.services).filter(s=>s.active).filter(s=>e.includes(s.id));return{hasErrors:o.length>0,conflictingServices:o}},jt=(e,r)=>{const t=u(g=>g.services.find(C=>C.id===e)),o=t==null?void 0:t.active,s=u(g=>g.toggleService),i=()=>{s(e)},{hasErrors:a,conflictingServices:c}=Ht(r),p=a?"red.900":"transparent",m=`Ta us\u0142uga nie mo\u017Ce by\u0107 \u0142\u0105czona z: ${c==null?void 0:c.map(g=>g.title).join(", ")}`;return{conflictingServices:c,hasErrors:a,bgColor:p,isActive:o,deleteServiceButtonHandler:i,conflictingServicesText:m,shortcutKey:t==null?void 0:t.deleteServiceShortcut}},_t={gap:"4",borderBottom:"2px",borderColor:"gray.600",p:"2",px:"4",align:"center",justify:"space-between",w:"100%"},B=({service:e,textToCopy:r,children:t,serviceId:o,hasError:s,cantBeMixedWith:i})=>{const{title:a,price:c,badges:p}=e,{bgColor:m,conflictingServicesText:g,deleteServiceButtonHandler:C,hasErrors:h,isActive:v,shortcutKey:w}=jt(o,i);return v?l(se,{..._t,bg:m,children:[n(I,{fontWeight:"bold",flex:"1 0 100px",children:a}),t,n(bt,{hasIncompatibleServices:h,badges:p}),n(zt,{hasError:s||h,textToCopy:h?g:r}),n(Dt,{price:c}),n(Pt,{shortcutKey:w,serviceDeleteHandler:C,children:n(Ot,{onDelete:C})})]}):null},Nt=()=>{const e=u(o=>o.services.find(s=>s.id==="6"));return(e==null?void 0:e.active)?n(B,{serviceId:"6",service:{title:"Dokumentacja",price:100,badges:["rycza\u0142t","po naprawie"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null},textToCopy:"Rycza\u0142t 100 z\u0142 za sporz\u0105dzenie dokumentacji"}):null},Wt=()=>{const e=u(h=>h.services.find(v=>v.id==="3")),{hours:r,rate:t,setHours:o,setRate:s}=u(h=>h.driveToPlace),i=u(h=>h.settings.distanceBeforeRepair),a=h=>{o(+h.target.value)},c=h=>{s(+h.target.value)};if(!(e==null?void 0:e.active))return null;const m=!r||!t||!i||r<0||t<0||i<0||r===0,g=`
      Dojazd i powrot z miejsca awarii:
      CZAS PRACY MECHANIKA ${r} h X STAWKA ${y(t)}/h + ${i*2} KM X ${y(me)} = ${y(e.price)}
`.toUpperCase(),C=m?"Podaj: odleg\u0142o\u015B\u0107, stawk\u0119 oraz roboczogodziny \u017Ceby obliczy\u0107 warto\u015B\u0107":g;return n(B,{cantBeMixedWith:["2","1","5"],hasError:m,serviceId:"3",service:{active:!0,badges:["przed napraw\u0105"],price:e.price,title:"Dojazd do miejsca awarii",preventCombineGroup:null,serviceType:"before repair"},textToCopy:C,children:l(R,{children:[l(A,{children:[n(E,{children:"Roboczogodziny"}),n(N,{onChange:a,value:r,min:"0",placeholder:"RBH",type:"number"})]}),l(A,{children:[n(E,{children:"Stawka"}),n(N,{onChange:c,value:t,min:"0",placeholder:"stawka",type:"number"})]})]})})},ye=[{name:"Audi A4",price:100,id:"1"},{name:"Audi A6",price:200,id:"2"},{name:"Audi A8",price:300,id:"3"}],Mt=(e,r,t)=>{const o=`Auto zast\u0119pcze: ${t}`,s=`Wynajem na ${r} dni, stawka ${y(e)} za dzie\u0144`,i=`Razem: ${y(e*r)}`;return[o,s,i].join(" | ")},Ft=()=>{const[e,r]=x.exports.useState(0),[t,o]=x.exports.useState(0),[s,i]=x.exports.useState(""),a=u(h=>h.services.find(v=>v.id==="2")),c=u(h=>h.setServicePrice),p=h=>{const v=h.target.valueAsNumber;r(v),isFinite(v)&&isFinite(t)&&c("2",v*t)},m=h=>{var w;const v=(w=ye.find(_=>_.name===h.target.value))==null?void 0:w.price;i(h.target.value),v&&o(v),isFinite(e)&&v&&isFinite(v)?c("2",e*v):c("2",0)},g=e>0&&s!==""&&t>0,C=g?Mt(t,e,s):"Nie wybrano modelu auta lub dni";return{days:e,daysInputHandler:p,carSelectHandler:m,shouldDisplayText:g,priceFromStore:a.price,textToCopy:C}},Lt=({name:e,price:r,model:t})=>n("option",{style:{fontSize:"12px",textAlign:"center"},value:t,children:`${e} - ${y(r)} / doba`},e),Kt=()=>{const{days:e,carSelectHandler:r,daysInputHandler:t,shouldDisplayText:o,priceFromStore:s,textToCopy:i}=Ft();return l(B,{hasError:!o,serviceId:"2",service:{active:!0,badges:["przed napraw\u0105"],price:s,title:"Auto zast\u0119pcze",preventCombineGroup:null,serviceType:"before repair"},textToCopy:i,children:[l(A,{flex:"0 0 200px",children:[n(E,{children:"Model"}),n(Oe,{flex:"0 0 200px",onChange:r,placeholder:"Wybierz model",children:ye.map(a=>n(Lt,{name:a.name,price:a.price,model:a.name},a.name))})]}),l(A,{flex:"0 0 200px",children:[n(E,{children:"Dni"}),n(N,{step:0,onChange:t,value:e,min:"0",placeholder:"days",type:"number"})]})]})},Vt=()=>{const e=u(t=>t.services.find(o=>o.id==="4"));return(e==null?void 0:e.active)?n(B,{cantBeMixedWith:["5","1","2"],serviceId:"4",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:100,title:"Bonus za napraw\u0119 na miejscu",preventCombineGroup:null,serviceType:"after repair"},textToCopy:"Bonus 100 z\u0142 za napraw\u0119 na miejscu"}):null},$t="https://api.nbp.pl/api/exchangerates/rates/A/EUR/?format=json",Ut=async()=>{const r=await(await fetch($t)).json();return{rate:r.rates[0].mid,date:r.rates[0].effectiveDate}},Gt=(e,r)=>{const t=60.03*e,o=r*1.41*e;return`OP\u0141ATA MANIPULACYJNA = 60,03 EURO NETTO  x KURS ${e}
   = ${y(t)}
  OP\u0141ATA ZA ODLEG\u0141O\u015A\u0106 1,41 EUR/km NETTO X ${r} km x KURS ${e} 
  = ${y(o)}
  RAZEM = ${y(t+o)}
  `},qt=()=>{const e=u(i=>i.services.find(a=>a.id==="5")),r=u(i=>i.settings.distanceAfterRepair),t=u(i=>i.setEuroCourse),o=u(i=>i.euroCourse),s=e==null?void 0:e.active;return x.exports.useEffect(()=>{if(!s||r<50||(Date.now()-o.timestamp)/1e3/60<60)return;(async()=>{const c=await Ut();t(c.rate,Date.now())})()},[o,s,r]),s?r<50?n(B,{serviceId:"5",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:e.price,title:"Odwiezienie pojazdu do 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:`Odwiezienie pojazdu klienta do 50 km 300 z\u0142 netto\r
`}):n(B,{serviceId:"5",service:{active:!0,badges:["po naprawie"],price:e.price,title:"Odwiezienie pojazdu od 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:Gt(o.rate,r)}):null},Jt=(e,r)=>{const t=`Masa pojazdu: ${e==="below 3.5t"?"poni\u017Cej 3.5t":"3.5t-5.5t"}`,s=`Op\u0142ata manipulacyjna: ${y(W[e])}`,i=y(r*D[e]),a=`Op\u0142ata za odleg\u0142o\u015B\u0107: ${r} km X ${y(D[e])} = ${i}`,p=`Razem: ${y(r*D[e]+W[e])}`;return[t,s,a,p].join(" | ")},Qt=({serviceId:e})=>{const{distanceBeforeRepair:r,vehicleWeight:t}=u(c=>c.settings),o=u(c=>c.services.find(p=>p.id===e));if(!(o==null?void 0:o.active))return null;const i=Jt(t,r),a={title:"Holowanie",price:o.price,badges:["przed napraw\u0105"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null};return n(B,{cantBeMixedWith:["3","4"],serviceId:e,service:a,textToCopy:i})},Xt=({drawerOpenHandler:e})=>{const r=u(s=>s.services).filter(s=>s.active).length>0,t=l(Z,{children:[n(Nt,{}),n(Qt,{serviceId:"1"}),n(Kt,{}),n(Wt,{}),n(Vt,{}),n(qt,{})]}),o=n(ae,{h:"100%",children:n(R,{children:n(De,{in:!0,children:n(k,{callback:e,keyboardKey:S.SHOW_DRAWER,children:l(V,{display:"flex",gap:".4rem",rounded:"3xl",onClick:e,children:[n(Ue,{}),n(I,{children:"Dodaj us\u0142ug\u0119"})]})})})})});return n(j,{border:"2px",borderColor:"gray.600",overflowY:"auto",shadow:"dark-lg",rounded:"xl",transition:"opacity 0.3s ease-in-out",flex:"1",h:"100%",bg:"chakra-subtle-bg",children:r?t:o})},X=({children:e,text:r})=>l(j,{bg:"gray.800",shadow:"lg",w:"100%",p:"2",rounded:"md",children:[n(I,{children:r}),e]}),Y=({active:e,children:r,onClick:t})=>n(V,{border:"4px",borderColor:e?"green.500":"transparent",onClick:t,width:"100%",children:r}),Yt=({isOpen:e,drawerCloseHandler:r})=>{const t=u(a=>a.services),o=u(a=>a.toggleService),[s,i]=t.reduce((a,c)=>(c.beforeRepair?a[0].push(c):a[1].push(c),a),[[],[]]);return l(Pe,{isOpen:e,placement:"left",onClose:r,children:[n(le,{}),l(He,{children:[n(ue,{}),n(de,{children:"Wybierz us\u0142ug\u0119 mobilno\u015Bci"}),n(pe,{p:"2",children:l(j,{gap:"4",align:"center",h:"100%",children:[n(X,{text:"Przed napraw\u0105",children:s.map(a=>n(Y,{active:a.active,onClick:()=>o(a.id),children:a.title},a.id))}),n(X,{text:"Po naprawie",children:i.map(a=>n(Y,{active:a.active,onClick:()=>o(a.id),children:a.title},a.id))})]})})]})]})},Zt=({service:e})=>{const r=y(e.price);return l(R,{w:"100%",justifyContent:"space-between",gap:"8px",children:[n("span",{children:e.title}),n("span",{children:r})]})},er=({isOpen:e,onClose:r})=>{const t=u(o=>o.services).filter(o=>o.active&&o.price>0);return l(je,{isCentered:!0,motionPreset:"slideInBottom",size:"xl",isOpen:e,onClose:r,children:[n(le,{}),l(_e,{children:[n(de,{children:"Podsumowanie us\u0142ug"}),n(ue,{}),n(pe,{children:t.map(o=>n(Zt,{service:o},o.id))}),n(Ne,{children:n(V,{children:"Drukuj"})})]})]})},tr=()=>{const[e,r]=x.exports.useState(!1),{isOpen:t,onOpen:o,onClose:s}=We();return l(j,{overflow:"hidden",padding:"4",gap:"16px",h:"100vh",children:[n(Ct,{summaryOpenHandler:o,drawerOpenHandler:()=>r(!0)}),n(Xt,{drawerOpenHandler:()=>r(!0)}),n(Yt,{isOpen:e,drawerCloseHandler:()=>r(!1)}),n(er,{isOpen:t,onClose:s})]})};const rr={initialColorMode:"dark",useSystemColorMode:!0},nr=Ge({config:rr}),or=new qe,ir=document.getElementById("root"),sr=fe(ir),ar=n(x.exports.StrictMode,{children:n(Je,{client:or,children:n(Me,{theme:nr,children:n(Se,{children:n(tr,{})})})})});sr.render(ar);
