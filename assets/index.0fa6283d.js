import{r as x,a as l,j as o,F as W,b as we,B as xe}from"./vendor.2eb4e70c.js";import{r as ie}from"./zustand.6d57a82b.js";import{E as Te,H as Re,D as Ee,V as Ie,s as se,v as Ae,w as ke,A as Be,x as ze}from"./@chakra-ui/icons.2944fe0a.js";import{V as H,K as Oe,F as I,b as A,I as M,c as ae,R as De,H as E,d as q,u as ce,e as V,f as P,A as He,M as G,g as Pe,h as J,i as Q,j as le,B as L,T as R,S as _e,k as de,l as ue,m as N,n as pe,C as je,o as k,p as he,q as Ne,r as me,s as fe,t as X,P as We,v as Me,w as Fe,x as Le,y as Ke,z as $e,D as Ue,E as ve,G as Ve,J as Ge,L as Je,N as Qe,O as ge,Q as qe,U as Xe,W as Ye}from"./@chakra-ui/react.268ae413.js";import{Q as Ze,a as et}from"./react-query.bcb59ad5.js";import"./@emotion/react.574a2348.js";import"./@emotion/styled.17703086.js";import"./framer-motion.9d8fc14d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const b=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),F={["below 3.5t"]:600,["3.5t-5.5t"]:800},_={["below 3.5t"]:4.9,["3.5t-5.5t"]:12.5},Se=.5,U=(e,t,n)=>e*t+n*2*Se,Y=(e,t)=>e*_[t]+F[t],tt=(e,t,n)=>e.map(r=>r.id===n?{...r,textSummary:t}:r),rt=e=>({driveToPlace:{rate:0,hours:0,setRate:t=>e(n=>({...n,services:n.services.map(r=>r.id==="3"?{...r,price:U(t,n.driveToPlace.hours,n.settings.distanceBeforeRepair)}:r),driveToPlace:{...n.driveToPlace,rate:t}})),setHours:t=>e(n=>({...n,services:n.services.map(r=>r.id==="3"?{...r,price:U(n.driveToPlace.rate,t,n.settings.distanceBeforeRepair)}:r),driveToPlace:{...n.driveToPlace,hours:t}}))}}),nt=e=>({euroCourse:{rate:0,timestamp:0},setEuroCourse:(t,n)=>e(r=>({...r,euroCourse:{rate:t,timestamp:n}}))}),ot={TOW_TO_BREAKDOWN:"H",TOW_BACK:"J",DRIVE_TO_CLIENT:"K",RENT_CAR:"L",DOCUMENTATION:"B",BONUS:"N"},it={DISTANCE_TO_BREAKDOWN:"Q",DISTANCE_TOW_BACK:"W",VEHICLE_MASS:"E"},w={VIEW_SERVICES:"V",RESET:"R",SHOW_DRAWER:"D",FOCUS:it,REMOVE_SERVICE:ot},D={distanceAfterRepair:0,distanceBeforeRepair:0,vehicleWeight:"below 3.5t"},st=e=>({settings:D,setVehicleWeight:t=>e(n=>({...n,settings:{...n.settings,vehicleWeight:t},services:n.services.map(r=>r.id==="1"?{...r,price:Y(n.settings.distanceBeforeRepair,t)}:r)})),setDistanceBeforeRepair:t=>e(n=>({...n,services:n.services.map(r=>r.id==="1"?{...r,price:Y(t,n.settings.vehicleWeight)}:r.id==="3"?{...r,price:U(n.driveToPlace.rate,n.driveToPlace.hours,t)}:r),settings:{...n.settings,distanceBeforeRepair:t}})),setDistanceAfterRepair:t=>e(n=>({...n,services:n.services.map(r=>r.id==="5"?{...r,price:t<50?300:t*1.41*4+60.03*4}:r),settings:{...n.settings,distanceAfterRepair:t}}))}),Z=[{title:"Holowanie z miejsca awarii",id:"1",mixGroup:1,price:F[D.vehicleWeight]+_[D.vehicleWeight]*D.distanceBeforeRepair,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:w.REMOVE_SERVICE.TOW_TO_BREAKDOWN},{title:"Auto zast\u0119pcze",id:"2",mixGroup:2,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:w.REMOVE_SERVICE.RENT_CAR},{title:"Dojazd do miejsca awarii",id:"3",mixGroup:1,price:0,textSummary:"",active:!1,beforeRepair:!0,deleteServiceShortcut:w.REMOVE_SERVICE.DRIVE_TO_CLIENT},{title:"Bonus za napraw\u0119 na miejscu",id:"4",mixGroup:1,price:100,textSummary:"Bonus za napraw\u0119 na miejscu 100 z\u0142",active:!1,deleteServiceShortcut:w.REMOVE_SERVICE.BONUS},{title:"Odwiezienie auta",id:"5",mixGroup:1,price:D.distanceAfterRepair<50?300:D.distanceAfterRepair*1.41*4+60.03*4,textSummary:"",active:!1,deleteServiceShortcut:w.REMOVE_SERVICE.TOW_BACK},{title:"Dokumentacja",id:"6",mixGroup:1,price:100,textSummary:"Rycza\u0142t 100 z\u0142 za wykonanie dokumentacji",active:!1,deleteServiceShortcut:w.REMOVE_SERVICE.DOCUMENTATION}],at=e=>({services:Z,toggleService:t=>e(n=>({...n,services:n.services.map(r=>r.id===t?{...r,active:!r.active}:r)})),resetServices:()=>e(t=>({...t,services:Z})),setServicePrice:(t,n)=>e(r=>({...r,services:r.services.map(s=>s.id===t?{...s,price:n}:s)})),setServiceTextSummary:(t,n)=>e(r=>({...r,services:tt(r.services,t,n)}))}),v=ie()((...e)=>({...st(...e),...at(...e),...rt(...e),...nt(...e)}));function ct(e){let t;try{t=e()}catch{return}return{getItem:r=>{var s;const i=c=>c===null?null:JSON.parse(c),a=(s=t.getItem(r))!=null?s:null;return a instanceof Promise?a.then(i):i(a)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s)),removeItem:r=>t.removeItem(r)}}const j=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return j(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return j(r)(n)}}}},lt=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:d=>d,version:0,merge:(d,f)=>({...f,...d}),...t},a=!1;const c=new Set,u=new Set;let p;try{p=i.getStorage()}catch{}if(!p)return e((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...d)},r,s);const y=j(i.serialize),C=()=>{const d=i.partialize({...r()});let f;const S=y({state:d,version:i.version}).then(O=>p.setItem(i.name,O)).catch(O=>{f=O});if(f)throw f;return S},h=s.setState;s.setState=(d,f)=>{h(d,f),C()};const g=e((...d)=>{n(...d),C()},r,s);let T;const m=()=>{var d;if(!p)return;a=!1,c.forEach(S=>S(r()));const f=((d=i.onRehydrateStorage)==null?void 0:d.call(i,r()))||void 0;return j(p.getItem.bind(p))(i.name).then(S=>{if(S)return i.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate)return i.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var O;return T=i.merge(S,(O=r())!=null?O:g),n(T,!0),C()}).then(()=>{f?.(T,void 0),a=!0,u.forEach(S=>S(T))}).catch(S=>{f?.(void 0,S)})};return s.persist={setOptions:d=>{i={...i,...d},d.getStorage&&(p=d.getStorage())},clearStorage:()=>{p?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:d=>(c.add(d),()=>{c.delete(d)}),onFinishHydration:d=>(u.add(d),()=>{u.delete(d)})},m(),T||g},dt=(e,t)=>(n,r,s)=>{let i={storage:ct(()=>localStorage),partialize:m=>m,version:0,merge:(m,d)=>({...d,...m}),...t},a=!1;const c=new Set,u=new Set;let p=i.storage;if(!p)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const y=()=>{const m=i.partialize({...r()});return p.setItem(i.name,{state:m,version:i.version})},C=s.setState;s.setState=(m,d)=>{C(m,d),y()};const h=e((...m)=>{n(...m),y()},r,s);let g;const T=()=>{var m;if(!p)return;a=!1,c.forEach(f=>f(r()));const d=((m=i.onRehydrateStorage)==null?void 0:m.call(i,r()))||void 0;return j(p.getItem.bind(p))(i.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate)return i.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var S;return g=i.merge(f,(S=r())!=null?S:h),n(g,!0),y()}).then(()=>{d?.(g,void 0),a=!0,u.forEach(f=>f(g))}).catch(f=>{d?.(void 0,f)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(p=m.storage)},clearStorage:()=>{p?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>T(),hasHydrated:()=>a,onHydrate:m=>(c.add(m),()=>{c.delete(m)}),onFinishHydration:m=>(u.add(m),()=>{u.delete(m)})},T(),g||h},ut=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(({VITE_TEST:"production",BASE_URL:"/mobilo-app/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),lt(e,t)):dt(e,t),pt=ut,K=ie()(pt((e,t)=>({extendedInfo:!0,show:()=>e({extendedInfo:!0}),hide:()=>e({extendedInfo:!1})}),{name:"extendedInfo"})),ht=(e,t)=>{const[n,r]=x.exports.useState(!1),s=x.exports.useCallback(a=>{a.shiftKey&&r(!0),a.key===e&&n&&t()},[n,e]),i=x.exports.useCallback(a=>{a.shiftKey||r(!1)},[n,e]);return x.exports.useEffect(()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",i)}),[s,i]),{modifierPressed:n}},mt="_wrapper_pg9d5_1",ft="_keyWrapper_pg9d5_9",vt="_scaleIn_pg9d5_1",gt="_left_pg9d5_41",St="_scaleInLeft_pg9d5_1",$={wrapper:mt,keyWrapper:ft,scaleIn:vt,left:gt,scaleInLeft:St},B=({children:e,keyboardKey:t,condition:n=!0,callback:r,direction:s})=>{const i=()=>{n&&r()},{modifierPressed:a}=ht(t,i);return l(H,{className:$.wrapper,children:[e,n&&a&&o("span",{className:`${$.keyWrapper} ${s==="left"?$.left:""}`,children:o(Oe,{children:t.toString().toUpperCase()})})]})},yt=({inputHelperText:e,inputTitle:t,value:n,onChange:r,focusShortcut:s})=>{const i=x.exports.useRef(null),a=K(c=>c.extendedInfo);return l(I,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[o(A,{children:t}),o(B,{callback:()=>{i.current?.focus()},keyboardKey:s,children:o(M,{ref:i,type:"number",min:"0",value:n,onChange:r})}),a&&o(ae,{children:e})]})},Ct=()=>{const e=v(n=>n.setVehicleWeight);return{vehicleWeightInputHandler:n=>{(n==="3.5t-5.5t"||n==="below 3.5t")&&e(n)}}},bt=()=>{const{vehicleWeightInputHandler:e}=Ct(),t=x.exports.useRef(null),n=()=>{const s=t.current?.querySelectorAll("input");s&&[...s].find(i=>i.checked)?.focus()},r=K(s=>s.extendedInfo);return l(I,{h:"100%",display:"flex",flexDir:"column",justifyContent:"space-between",children:[o(A,{as:"legend",children:"Masa pojazdu"}),o(B,{keyboardKey:w.FOCUS.VEHICLE_MASS,callback:n,children:o(De,{ref:t,onChange:e,defaultValue:"below 3.5t",children:l(E,{spacing:"24px",children:[o(q,{value:"below 3.5t",children:"Poni\u017Cej 3.5t"}),o(q,{value:"3.5t-5.5t",children:"3.5t - 5.5t"})]})})}),r&&o(ae,{children:"Do rozliczania holowania"})]})},wt=()=>{const{setDistanceAfterRepair:e,setDistanceBeforeRepair:t,settings:n}=v(i=>i);return{distanceInputHandler:i=>{t(Number(i.target.value))},distanceAfterRepairInputHandler:i=>{e(Number(i.target.value))},distanceBeforeRepair:n.distanceBeforeRepair,distanceAfterRepair:n.distanceAfterRepair}},xt=()=>{const{distanceAfterRepair:e,distanceAfterRepairInputHandler:t,distanceBeforeRepair:n,distanceInputHandler:r}=wt(),{isOpen:s,onOpen:i,onClose:a}=ce(),c=x.exports.useRef(null),[u]=V("(min-width: 800px)"),p=[{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107",value:n,onChange:r,focusShortcut:w.FOCUS.DISTANCE_TO_BREAKDOWN},{inputHelperText:"Odleg\u0142o\u015B\u0107 w jedn\u0105 stron\u0119 (km)",inputTitle:"Odleg\u0142o\u015B\u0107 odwiezienia",value:e,onChange:t,focusShortcut:w.FOCUS.DISTANCE_TOW_BACK}].map(C=>o(yt,{...C},C.inputTitle)),y=l(W,{children:[p," ",o(bt,{})]});return u?o(E,{h:"100%",rounded:"2xl",p:"4",shadow:"lg",border:"4px",borderColor:"gray.700",align:"baseline",children:y}):l(W,{children:[o(P,{colorScheme:"blue",size:"lg",rounded:"full",onClick:i,"aria-label":"Edytuj us\u0142ugi",icon:o(Te,{fontSize:"3xl",m:"2"})}),o(He,{isOpen:s,leastDestructiveRef:c,onClose:a,children:o(G,{children:l(Pe,{maxWidth:"95%",alignSelf:"center",children:[o(J,{fontSize:"lg",fontWeight:"bold",children:"Edytuj us\u0142ugi"}),l(Q,{children:[" ",o(H,{gap:8,h:"100%",borderColor:"gray.700",align:"baseline",children:y})]}),o(le,{mt:"8",children:o(L,{ref:c,onClick:a,children:"Zamknij"})})]})})})]})},Tt=({drawerOpenHandler:e})=>o(B,{keyboardKey:w.SHOW_DRAWER,callback:e,children:o(R,{hasArrow:!0,label:"Menu z us\u0142ugami",children:o(P,{"aria-label":"Poka\u017C us\u0142ugi",onClick:e,children:o(Re,{})})})}),Rt=()=>{const t=v(r=>r.services).filter(r=>r.active),n=t.filter(r=>r.price>0).length>0;return{servicesCount:t.length,hasServices:t.length>0,hasServicesWithValue:n}},Et=({summaryOpenHandler:e})=>{const{resetServices:t}=v(u=>u),{hasServices:n,hasServicesWithValue:r}=Rt(),{extendedInfo:s,hide:i,show:a}=K(u=>u),c=u=>{u.target.checked?a():i()};return l(H,{children:[l(E,{children:[o(B,{condition:n,keyboardKey:w.RESET,callback:t,children:o(R,{hasArrow:!0,label:"Resetuj wszystko",children:o(P,{disabled:!n,onClick:t,"aria-label":"Resetuj wszystko",children:o(Ee,{})})})}),o(B,{condition:r,keyboardKey:w.VIEW_SERVICES,callback:e,children:o(R,{hasArrow:!0,label:"Podsumowanie us\u0142ug",children:o(P,{disabled:!r,onClick:e,"aria-label":"Podsumowanie us\u0142ug",children:o(Ie,{})})})})]}),o(R,{hasArrow:!0,label:`Wy\u015Bwietl ${s?"mniej":"wi\u0119cej"} informacji`,placement:"left",children:o(I,{display:"flex",alignItems:"center",children:l(H,{children:[o(A,{htmlFor:"extended-info",mb:"0",children:"Informacje"}),o(_e,{isChecked:s,onChange:c,id:"extended-info"})]})})})]})},It=({activeServiceSummary:e,activeServices:t})=>{const n=t.length,r=n>0,s=b(e),i=K(a=>a.extendedInfo);return o(de,{h:"100%",rounded:"2xl",p:"4",shadow:"2xl",border:"4px",borderColor:"green.700",children:o(ue,{h:"100%",children:l(N,{children:[o(pe,{children:l(E,{children:[r&&o(je,{size:"30px",bg:"green.700",children:n}),o(k,{children:"Razem"})]})}),o(he,{children:s}),i&&o(Ne,{children:"Ca\u0142kowita warto\u015B\u0107 us\u0142ug"})]})})})},ee=({drawerOpenHandler:e,summaryOpenHandler:t})=>{const r=v(c=>c.services).filter(c=>c.active),s=r.reduce((c,u)=>c+u.price,0),i=v(c=>c.euroCourse),a=Boolean(i.rate&&i.rate>0);return V("(min-width: 800px)"),l(me,{padding:8,w:"100%",align:"center",justify:"space-between",gap:"2",children:[o(Tt,{drawerOpenHandler:e}),o(xt,{}),a&&o(de,{padding:"2",rounded:"2xl",border:"4px",borderColor:"blue.800",h:"100%",children:o(fe,{h:"100%",children:l(H,{children:[o(k,{fontWeight:"bold",children:"Kurs EUR:"}),o(k,{children:b(i.rate)})]})})}),o(It,{activeServices:r,activeServiceSummary:s}),o(Et,{summaryOpenHandler:t})]})},At=({badges:e,hasIncompatibleServices:t})=>{const n=e.map(i=>o(X,{colorScheme:"green",children:i}));return o(H,{flexBasis:"10%",children:t?o(X,{colorScheme:"purple",variant:"outline",children:"Niekompatybilna"}):n})},kt="_button_1wpqb_1",te={button:kt},Bt=({children:e,text:t,onCopy:n})=>l(We,{children:[o(Me,{children:o("button",{className:te.button,children:o(R,{hasArrow:!0,label:"Poka\u017C ca\u0142o\u015B\u0107",children:e})})}),l(Fe,{shadow:"2xl",children:[o(Le,{}),o(Ke,{}),o($e,{children:"Informacje o us\u0142udze"}),o(Ue,{children:o(R,{hasArrow:!0,label:"Skopiuj tekst",children:o("button",{className:te.button,onClick:n,children:t.split("|").map(r=>o("p",{children:r}))})})})]})]}),ye=({children:e,hasCopied:t})=>o(R,{closeOnClick:!1,bg:t?"green.500":"gray.500",hasArrow:!0,label:t?"Skopiowano":"Skopiuj",children:e}),zt=({hasCopied:e,onCopy:t})=>o(ye,{hasCopied:e,children:o(P,{onClick:t,"aria-label":"Skopiuj do schowka",children:e?o(se,{}):o(Ae,{})})}),Ot={justifyContent:"space-between",flex:"0 0 350px",bg:"chakra-body-bg",rounded:"md",shadow:"md",p:"2"},Dt={fontSize:"xs",fontFamily:"mono",maxH:"4em",overflow:"auto"},Ht={fontStyle:"italic"},Pt={border:"2px",borderColor:"red.700"},_t=e=>{const t={\u0105:"a",\u0107:"c",\u0119:"e",\u0142:"l",\u0144:"n",\u00F3:"o",\u015B:"s",\u017A:"z",\u017C:"z"};return e.toLowerCase().replace(/[ąćęłńóśźż]/g,n=>t[n]).toUpperCase()},jt=(e="",t)=>{const n=_t(e).split("|").map(u=>u.trim()).join(`
`).trim(),{onCopy:r,hasCopied:s}=ve(n);return{onCopy:()=>{r(),navigator.clipboard.writeText(n)},hasCopied:s,errorStyle:t?Pt:{},textStyle:t?Ht:{}}},Nt=({textToCopy:e,hasError:t})=>{const{errorStyle:n,hasCopied:r,textStyle:s,onCopy:i}=jt(e,t);return e?l(E,{...Ot,...n,children:[o(Bt,{onCopy:i,text:e,children:o(k,{...s,...Dt,children:e.split("|").map(a=>o("p",{children:a}))})}),o(zt,{hasCopied:r,onCopy:i})]}):null},Wt=({onDelete:e})=>o(R,{hasArrow:!0,label:"Usu\u0144 us\u0142ug\u0119",children:o(P,{onClick:e,"aria-label":"Usu\u0144 us\u0142ug\u0119",children:o(ke,{})})}),Mt=({price:e})=>{const t=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e),{onCopy:n,hasCopied:r}=ve(e.toFixed(2));return o(ue,{display:"flex",justifyContent:"center",w:"fit-content",flex:"0 0 120px",children:o(ye,{hasCopied:r,children:l("button",{onClick:()=>{n(),navigator.clipboard.writeText(e.toString())},children:[o(pe,{children:"Op\u0142ata"}),o(he,{whiteSpace:"nowrap",children:r?o(se,{}):t})]})})})},Ft=({children:e,shortcutKey:t,serviceDeleteHandler:n})=>t?o(B,{direction:"left",callback:n,keyboardKey:t,children:e}):o(W,{children:e}),Lt=e=>{if(!e)return{hasErrors:!1};const r=v(s=>s.services).filter(s=>s.active).filter(s=>e.includes(s.id));return{hasErrors:r.length>0,conflictingServices:r}},Kt=(e,t)=>{const n=v(y=>y.services.find(C=>C.id===e)),r=n?.active,s=v(y=>y.toggleService),i=()=>{s(e)},{hasErrors:a,conflictingServices:c}=Lt(t),u=a?"red.900":"transparent",p=`Ta us\u0142uga nie mo\u017Ce by\u0107 \u0142\u0105czona z: ${c?.map(y=>y.title).join(", ")}`;return{conflictingServices:c,hasErrors:a,bgColor:u,isActive:r,deleteServiceButtonHandler:i,conflictingServicesText:p,shortcutKey:n?.deleteServiceShortcut}},$t={gap:"4",borderBottom:"2px",borderColor:"gray.600",p:"2",px:"4",align:"center",justify:"space-between",w:"100%"},z=({service:e,textToCopy:t,children:n,serviceId:r,hasError:s,cantBeMixedWith:i})=>{const{title:a,price:c,badges:u}=e,{bgColor:p,conflictingServicesText:y,deleteServiceButtonHandler:C,hasErrors:h,isActive:g,shortcutKey:T}=Kt(r,i);return g?l(me,{...$t,bg:p,children:[o(k,{fontWeight:"bold",flex:"1 0 100px",children:a}),n,o(At,{hasIncompatibleServices:h,badges:u}),o(Nt,{hasError:s||h,textToCopy:h?y:t}),o(Mt,{price:c}),o(Ft,{shortcutKey:T,serviceDeleteHandler:C,children:o(Wt,{onDelete:C})})]}):null},Ut=()=>v(r=>r.services.find(s=>s.id==="6"))?.active?o(z,{serviceId:"6",service:{title:"Dokumentacja",price:100,badges:["rycza\u0142t","po naprawie"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null},textToCopy:"Rycza\u0142t 100 z\u0142 za sporz\u0105dzenie dokumentacji"}):null,Vt=()=>{const e=v(h=>h.services.find(g=>g.id==="3")),{hours:t,rate:n,setHours:r,setRate:s}=v(h=>h.driveToPlace),i=v(h=>h.settings.distanceBeforeRepair),a=h=>{r(+h.target.value)},c=h=>{s(+h.target.value)};if(!e?.active)return null;const p=!t||!n||!i||t<0||n<0||i<0||t===0,y=`
      Dojazd i powrot z miejsca awarii:
      CZAS PRACY MECHANIKA ${t} h X STAWKA ${b(n)}/h + ${i*2} KM X ${b(Se)} = ${b(e.price)}
`.toUpperCase(),C=p?"Podaj: odleg\u0142o\u015B\u0107, stawk\u0119 oraz roboczogodziny \u017Ceby obliczy\u0107 warto\u015B\u0107":y;return o(z,{cantBeMixedWith:["2","1","5"],hasError:p,serviceId:"3",service:{active:!0,badges:["przed napraw\u0105"],price:e.price,title:"Dojazd do miejsca awarii",preventCombineGroup:null,serviceType:"before repair"},textToCopy:C,children:l(E,{children:[l(I,{children:[o(A,{children:"Roboczogodziny"}),o(M,{onChange:a,value:t,min:"0",placeholder:"RBH",type:"number"})]}),l(I,{children:[o(A,{children:"Stawka"}),o(M,{onChange:c,value:n,min:"0",placeholder:"stawka",type:"number"})]})]})})},Ce=[{name:"Audi A4",price:100,id:"1"},{name:"Audi A6",price:200,id:"2"},{name:"Audi A8",price:300,id:"3"}],Gt=(e,t,n)=>{const r=`Auto zast\u0119pcze: ${n}`,s=`Wynajem na ${t} dni, stawka ${b(e)} za dzie\u0144`,i=`Razem: ${b(e*t)}`;return[r,s,i].join(" | ")},Jt=()=>{const[e,t]=x.exports.useState(0),[n,r]=x.exports.useState(0),[s,i]=x.exports.useState(""),a=v(h=>h.services.find(g=>g.id==="2")),c=v(h=>h.setServicePrice),u=h=>{const g=h.target.valueAsNumber;t(g),isFinite(g)&&isFinite(n)&&c("2",g*n)},p=h=>{const g=Ce.find(T=>T.name===h.target.value)?.price;i(h.target.value),g&&r(g),isFinite(e)&&g&&isFinite(g)?c("2",e*g):c("2",0)},y=e>0&&s!==""&&n>0,C=y?Gt(n,e,s):"Nie wybrano modelu auta lub dni";return{days:e,daysInputHandler:u,carSelectHandler:p,shouldDisplayText:y,priceFromStore:a.price,textToCopy:C}},Qt=({name:e,price:t,model:n})=>o("option",{style:{fontSize:"12px",textAlign:"center"},value:n,children:`${e} - ${b(t)} / doba`},e),qt=()=>{const{days:e,carSelectHandler:t,daysInputHandler:n,shouldDisplayText:r,priceFromStore:s,textToCopy:i}=Jt();return l(z,{hasError:!r,serviceId:"2",service:{active:!0,badges:["przed napraw\u0105"],price:s,title:"Auto zast\u0119pcze",preventCombineGroup:null,serviceType:"before repair"},textToCopy:i,children:[l(I,{flex:"0 0 200px",children:[o(A,{children:"Model"}),o(Ve,{flex:"0 0 200px",onChange:t,placeholder:"Wybierz model",children:Ce.map(a=>o(Qt,{name:a.name,price:a.price,model:a.name},a.name))})]}),l(I,{flex:"0 0 200px",children:[o(A,{children:"Dni"}),o(M,{step:0,onChange:n,value:e,min:"0",placeholder:"days",type:"number"})]})]})},Xt=()=>v(n=>n.services.find(r=>r.id==="4"))?.active?o(z,{cantBeMixedWith:["5","1","2"],serviceId:"4",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:100,title:"Bonus za napraw\u0119 na miejscu",preventCombineGroup:null,serviceType:"after repair"},textToCopy:"Bonus 100 z\u0142 za napraw\u0119 na miejscu"}):null,Yt="https://api.nbp.pl/api/exchangerates/rates/A/EUR/?format=json",Zt=async()=>{const t=await(await fetch(Yt)).json();return{rate:t.rates[0].mid,date:t.rates[0].effectiveDate}},er=(e,t)=>{const n=60.03*e,r=t*1.41*e;return`OP\u0141ATA MANIPULACYJNA = 60,03 EURO NETTO  x KURS ${e}
   = ${b(n)}
  OP\u0141ATA ZA ODLEG\u0141O\u015A\u0106 1,41 EUR/km NETTO X ${t} km x KURS ${e} 
  = ${b(r)}
  RAZEM = ${b(n+r)}
  `},tr=()=>{const e=v(i=>i.services.find(a=>a.id==="5")),t=v(i=>i.settings.distanceAfterRepair),n=v(i=>i.setEuroCourse),r=v(i=>i.euroCourse),s=e?.active;return x.exports.useEffect(()=>{if(!s||t<50||(Date.now()-r.timestamp)/1e3/60<60)return;(async()=>{const c=await Zt();n(c.rate,Date.now())})()},[r,s,t]),s?t<50?o(z,{serviceId:"5",service:{active:!0,badges:["po naprawie","rycza\u0142t"],price:e.price,title:"Odwiezienie pojazdu do 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:`Odwiezienie pojazdu klienta do 50 km 300 z\u0142 netto\r
`}):o(z,{serviceId:"5",service:{active:!0,badges:["po naprawie"],price:e.price,title:"Odwiezienie pojazdu od 50 km",preventCombineGroup:null,serviceType:"after repair"},textToCopy:er(r.rate,t)}):null},rr=(e,t)=>{const n=`Masa pojazdu: ${e==="below 3.5t"?"poni\u017Cej 3.5t":"3.5t-5.5t"}`,s=`Op\u0142ata manipulacyjna: ${b(F[e])}`,i=b(t*_[e]),a=`Op\u0142ata za odleg\u0142o\u015B\u0107: ${t} km X ${b(_[e])} = ${i}`,u=`Razem: ${b(t*_[e]+F[e])}`;return[n,s,a,u].join(" | ")},nr=({serviceId:e})=>{const{distanceBeforeRepair:t,vehicleWeight:n}=v(c=>c.settings),r=v(c=>c.services.find(u=>u.id===e));if(!r?.active)return null;const i=rr(n,t),a={title:"Holowanie",price:r.price,badges:["przed napraw\u0105"],active:!0,serviceType:"after repair",serviceSummaryText:"Dokumentacja",preventCombineGroup:null};return o(z,{cantBeMixedWith:["3","4"],serviceId:e,service:a,textToCopy:i})},or=({drawerOpenHandler:e})=>{const t=v(s=>s.services).filter(s=>s.active).length>0,n=l(W,{children:[o(Ut,{}),o(nr,{serviceId:"1"}),o(qt,{}),o(Vt,{}),o(Xt,{}),o(tr,{})]}),r=o(fe,{h:"100%",children:o(E,{children:o(Ge,{in:!0,children:o(B,{callback:e,keyboardKey:w.SHOW_DRAWER,children:l(L,{display:"flex",gap:".4rem",rounded:"3xl",onClick:e,children:[o(Be,{}),o(k,{children:"Dodaj us\u0142ug\u0119"})]})})})})});return o(N,{border:"2px",borderColor:"gray.600",overflowY:"auto",shadow:"dark-lg",rounded:"xl",transition:"opacity 0.3s ease-in-out",flex:"1",h:"100%",bg:"chakra-subtle-bg",children:t?n:r})},re=({children:e,text:t})=>l(N,{bg:"gray.800",shadow:"lg",w:"100%",p:"2",rounded:"md",children:[o(k,{children:t}),e]}),ne=({active:e,children:t,onClick:n})=>o(L,{border:"4px",borderColor:e?"green.500":"transparent",onClick:n,width:"100%",children:t}),ir=({isOpen:e,drawerCloseHandler:t})=>{const n=v(a=>a.services),r=v(a=>a.toggleService),[s,i]=n.reduce((a,c)=>(c.beforeRepair?a[0].push(c):a[1].push(c),a),[[],[]]);return l(Je,{isOpen:e,placement:"left",onClose:t,children:[o(G,{}),l(Qe,{children:[o(ge,{}),o(J,{children:"Wybierz us\u0142ug\u0119 mobilno\u015Bci"}),o(Q,{p:"2",children:l(N,{gap:"4",align:"center",h:"100%",children:[o(re,{text:"Przed napraw\u0105",children:s.map(a=>o(ne,{active:a.active,onClick:()=>r(a.id),children:a.title},a.id))}),o(re,{text:"Po naprawie",children:i.map(a=>o(ne,{active:a.active,onClick:()=>r(a.id),children:a.title},a.id))})]})})]})]})},sr=({service:e})=>{const t=b(e.price);return l(E,{w:"100%",justifyContent:"space-between",gap:"8px",children:[o("span",{children:e.title}),o("span",{children:t})]})},ar=({isOpen:e,onClose:t})=>{const n=v(r=>r.services).filter(r=>r.active&&r.price>0);return l(qe,{isCentered:!0,motionPreset:"slideInBottom",size:"xl",isOpen:e,onClose:t,children:[o(G,{}),l(Xe,{children:[o(J,{children:"Podsumowanie us\u0142ug"}),o(ge,{}),o(Q,{children:n.map(r=>o(sr,{service:r},r.id))}),o(le,{children:o(L,{children:"Drukuj"})})]})]})},cr=()=>{const[e,t]=x.exports.useState(!1),{isOpen:n,onOpen:r,onClose:s}=ce(),[i]=V("(min-width: 800px)");return l(N,{overflow:"hidden",padding:i?"8":"0",gap:"16px",h:"100vh",children:[i&&o(ee,{summaryOpenHandler:r,drawerOpenHandler:()=>t(!0)}),o(or,{drawerOpenHandler:()=>t(!0)}),!i&&o(ee,{summaryOpenHandler:r,drawerOpenHandler:()=>t(!0)}),o(ir,{isOpen:e,drawerCloseHandler:()=>t(!1)}),o(ar,{isOpen:n,onClose:s})]})};var be,oe=we.exports;be=oe.createRoot,oe.hydrateRoot;const lr={initialColorMode:"dark",useSystemColorMode:!0},dr=ze({config:lr}),ur=new Ze,pr=document.getElementById("root"),hr=be(pr),mr=o(x.exports.StrictMode,{children:o(et,{client:ur,children:o(Ye,{theme:dr,children:o(xe,{children:o(cr,{})})})})});hr.render(mr);
//# sourceMappingURL=index.0fa6283d.js.map
